# ğŸŒŒ Nebula Lucent å®Œæ•´é¡¹ç›®æ•™å­¦æ–‡æ¡£

> ä¸€ä»½è¯¦å°½çš„å®‡å®™ä¸»é¢˜ä¸ªäººç½‘ç«™å¼€å‘æ•™ç¨‹ï¼Œæ¶µç›–æ¯ä¸ªåº“çš„ä½¿ç”¨åŸå› ã€æ¯ä¸ªæ–‡ä»¶çš„ä½œç”¨ã€å®Œæ•´çš„å¼€å‘æµç¨‹å’Œä»£ç è¯¦è§£ã€‚

---

## ğŸ“š ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#1-é¡¹ç›®æ¦‚è¿°)
2. [æŠ€æœ¯æ ˆè¯¦è§£](#2-æŠ€æœ¯æ ˆè¯¦è§£)
3. [é¡¹ç›®ç»“æ„è§£æ](#3-é¡¹ç›®ç»“æ„è§£æ)
4. [æ ¸å¿ƒä¾èµ–åº“è¯¦è§£](#4-æ ¸å¿ƒä¾èµ–åº“è¯¦è§£)
5. [é…ç½®æ–‡ä»¶è¯¦è§£](#5-é…ç½®æ–‡ä»¶è¯¦è§£)
6. [å…¨å±€æ ·å¼ç³»ç»Ÿ](#6-å…¨å±€æ ·å¼ç³»ç»Ÿ)
7. [æ ¸å¿ƒç»„ä»¶è¯¦è§£](#7-æ ¸å¿ƒç»„ä»¶è¯¦è§£)
8. [é¡µé¢å¼€å‘è¯¦è§£](#8-é¡µé¢å¼€å‘è¯¦è§£)
9. [æ•°æ®å±‚è¯¦è§£](#9-æ•°æ®å±‚è¯¦è§£)
10. [3Dæ•ˆæœå®ç°](#10-3dæ•ˆæœå®ç°)
11. [æ€§èƒ½ä¼˜åŒ–ç­–ç•¥](#11-æ€§èƒ½ä¼˜åŒ–ç­–ç•¥)
12. [å¼€å‘æµç¨‹æŒ‡å—](#12-å¼€å‘æµç¨‹æŒ‡å—)

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®ç®€ä»‹

Nebula Lucent æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„å®‡å®™ä¸»é¢˜ä¸ªäººç½‘ç«™ï¼ŒåŒ…å«ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ï¼š

| æ¨¡å— | åŠŸèƒ½ | è·¯ç”± |
|------|------|------|
| é¦–é¡µ | å®‡å®™ä¸»é¢˜å±•ç¤ºé¡µï¼Œæ¨¡å—å¯¼èˆªå…¥å£ | `/` |
| åšå®¢ | MDX æ ¼å¼æ–‡ç« ç³»ç»Ÿ | `/posts` |
| çŸ¥è¯†åº“ | åˆ†ç±»çŸ¥è¯†ç®¡ç† | `/knowledge` |
| ä½œå“é›† | é“¶æ²³ç³»é£æ ¼é¡¹ç›®å±•ç¤º | `/program` |
| å®éªŒå®¤ | æŠ€æœ¯å®éªŒå’Œ Demo | `/lab` |

### 1.2 æ ¸å¿ƒç‰¹æ€§

- ğŸ¨ **å®‡å®™ä¸»é¢˜è®¾è®¡**ï¼šæ·±ç´«ã€æ˜Ÿäº‘ç²‰ã€æå…‰é’çš„é…è‰²ç³»ç»Ÿ
- âœ¨ **é¼ æ ‡è·Ÿéšæ˜Ÿçƒ**ï¼šå¼¹æ€§åŠ¨ç”»çš„è¡Œæ˜Ÿè·Ÿéšæ•ˆæœ
- ğŸŒŸ **CSS æ˜Ÿç‚¹åŠ¨ç”»**ï¼šéšæœºé—ªçƒçš„æ˜Ÿç©ºèƒŒæ™¯
- ğŸ’« **æ¯›ç»ç’ƒå¡ç‰‡**ï¼šå…‰çº¿è¿½è¸ªè¾¹æ¡†æ•ˆæœ
- ğŸŒŒ **3D é“¶æ²³ç³»**ï¼šThree.js ç²’å­ç³»ç»Ÿ
- ğŸ“± **å“åº”å¼è®¾è®¡**ï¼šç§»åŠ¨ç«¯è‡ªé€‚åº”

---

## 2. æŠ€æœ¯æ ˆè¯¦è§£

### 2.1 æ ¸å¿ƒæ¡†æ¶


```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æŠ€æœ¯æ ˆæ¶æ„å›¾                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å‰ç«¯æ¡†æ¶å±‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Next.js 16 â”‚  â”‚  React 19   â”‚  â”‚ TypeScript  â”‚         â”‚
â”‚  â”‚  App Router â”‚  â”‚  Hooks      â”‚  â”‚  ç±»å‹å®‰å…¨    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ ·å¼å±‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚Tailwind CSS â”‚  â”‚ CSS å˜é‡    â”‚  â”‚ CSS åŠ¨ç”»    â”‚         â”‚
â”‚  â”‚  åŸå­åŒ–CSS   â”‚  â”‚  ä¸»é¢˜ç³»ç»Ÿ   â”‚  â”‚  @keyframes â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  3D æ¸²æŸ“å±‚                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Three.js  â”‚  â”‚ React Three â”‚  â”‚    Drei     â”‚         â”‚
â”‚  â”‚   WebGL     â”‚  â”‚   Fiber     â”‚  â”‚  3D ç»„ä»¶åº“  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å†…å®¹å±‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚    MDX      â”‚  â”‚ gray-matter â”‚  â”‚  highlight  â”‚         â”‚
â”‚  â”‚  Markdown   â”‚  â”‚  frontmatterâ”‚  â”‚  ä»£ç é«˜äº®   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ä¸ºä»€ä¹ˆé€‰æ‹©è¿™äº›æŠ€æœ¯ï¼Ÿ

#### Next.js 16 (App Router)

**é€‰æ‹©åŸå› ï¼š**
1. **æ–‡ä»¶ç³»ç»Ÿè·¯ç”±**ï¼š`app/` ç›®å½•ä¸‹çš„æ–‡ä»¶è‡ªåŠ¨æˆä¸ºè·¯ç”±
2. **æœåŠ¡ç«¯ç»„ä»¶**ï¼šé»˜è®¤ RSCï¼Œå‡å°‘å®¢æˆ·ç«¯ JS ä½“ç§¯
3. **æµå¼æ¸²æŸ“**ï¼šSuspense æ”¯æŒï¼Œæå‡é¦–å±é€Ÿåº¦
4. **å†…ç½®ä¼˜åŒ–**ï¼šå›¾ç‰‡ã€å­—ä½“ã€è„šæœ¬è‡ªåŠ¨ä¼˜åŒ–

**åœ¨é¡¹ç›®ä¸­çš„åº”ç”¨ï¼š**
```
app/
â”œâ”€â”€ page.tsx          â†’ é¦–é¡µ (/)
â”œâ”€â”€ posts/
â”‚   â”œâ”€â”€ page.tsx      â†’ æ–‡ç« åˆ—è¡¨ (/posts)
â”‚   â””â”€â”€ [slug]/
â”‚       â””â”€â”€ page.tsx  â†’ æ–‡ç« è¯¦æƒ… (/posts/xxx)
â””â”€â”€ layout.tsx        â†’ å…¨å±€å¸ƒå±€
```

#### React 19

**é€‰æ‹©åŸå› ï¼š**
1. **å¹¶å‘ç‰¹æ€§**ï¼šæ›´å¥½çš„ç”¨æˆ·ä½“éªŒ
2. **Hooks ç”Ÿæ€**ï¼šuseState, useEffect, useRef, useMemo
3. **Server Components**ï¼šä¸ Next.js å®Œç¾é…åˆ

#### TypeScript

**é€‰æ‹©åŸå› ï¼š**
1. **ç±»å‹å®‰å…¨**ï¼šç¼–è¯‘æ—¶æ•è·é”™è¯¯
2. **IDE æ”¯æŒ**ï¼šè‡ªåŠ¨è¡¥å…¨ã€é‡æ„
3. **æ–‡æ¡£ä½œç”¨**ï¼šæ¥å£å®šä¹‰å³æ–‡æ¡£

**é¡¹ç›®ä¸­çš„ç±»å‹å®šä¹‰ç¤ºä¾‹ï¼š**
```typescript
// src/lib/projects.ts
export interface Project {
  id: string;
  title: string;
  description: string;
  technologies: string[];
  category: "web" | "mobile" | "desktop" | "game" | "other";
  status: "completed" | "in-progress" | "archived";
  // ...
}
```

#### Tailwind CSS 4

**é€‰æ‹©åŸå› ï¼š**
1. **åŸå­åŒ– CSS**ï¼šå¿«é€Ÿå¼€å‘ï¼Œæ— éœ€å‘½å
2. **JIT ç¼–è¯‘**ï¼šæŒ‰éœ€ç”Ÿæˆï¼Œä½“ç§¯å°
3. **å“åº”å¼**ï¼š`md:`, `lg:` å‰ç¼€
4. **æ·±è‰²æ¨¡å¼**ï¼š`dark:` å‰ç¼€

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```tsx
<div className="
  p-4 md:p-6 lg:p-8           // å“åº”å¼å†…è¾¹è·
  bg-white dark:bg-gray-900   // æ·±è‰²æ¨¡å¼
  hover:scale-105             // æ‚¬åœæ•ˆæœ
  transition-all duration-300 // è¿‡æ¸¡åŠ¨ç”»
">
```

---

## 3. é¡¹ç›®ç»“æ„è§£æ

### 3.1 å®Œæ•´ç›®å½•ç»“æ„


```
nebula-lucent/
â”‚
â”œâ”€â”€ ğŸ“ app/                          # Next.js App Router é¡µé¢ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“„ layout.tsx                # æ ¹å¸ƒå±€ï¼ˆå…¨å±€å¯¼èˆªã€Footerï¼‰
â”‚   â”œâ”€â”€ ğŸ“„ page.tsx                  # é¦–é¡µ
â”‚   â”œâ”€â”€ ğŸ“„ globals.css               # å…¨å±€æ ·å¼ï¼ˆå®‡å®™ä¸»é¢˜æ ¸å¿ƒï¼‰
â”‚   â”œâ”€â”€ ğŸ“ posts/                    # åšå®¢æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ page.tsx              # æ–‡ç« åˆ—è¡¨é¡µ
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ PostsClient.tsx       # å®¢æˆ·ç«¯äº¤äº’ç»„ä»¶
â”‚   â”‚   â””â”€â”€ ğŸ“ [slug]/               # åŠ¨æ€è·¯ç”±
â”‚   â”‚       â””â”€â”€ ğŸ“„ page.tsx          # æ–‡ç« è¯¦æƒ…é¡µ
â”‚   â”œâ”€â”€ ğŸ“ knowledge/                # çŸ¥è¯†åº“æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ page.tsx              # çŸ¥è¯†åº“é¦–é¡µ
â”‚   â”‚   â””â”€â”€ ğŸ“ [category]/           # åˆ†ç±»é¡µé¢
â”‚   â”‚       â””â”€â”€ ğŸ“„ page.tsx
â”‚   â”œâ”€â”€ ğŸ“ program/                  # ä½œå“é›†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ page.tsx              # ä½œå“é›†é¦–é¡µï¼ˆé“¶æ²³ç³»å±•ç¤ºï¼‰
â”‚   â”‚   â””â”€â”€ ğŸ“ [id]/                 # ä½œå“è¯¦æƒ…
â”‚   â”‚       â””â”€â”€ ğŸ“„ page.tsx
â”‚   â””â”€â”€ ğŸ“ lab/                      # å®éªŒå®¤æ¨¡å—
â”‚       â”œâ”€â”€ ğŸ“„ page.tsx              # å®éªŒåˆ—è¡¨
â”‚       â””â”€â”€ ğŸ“ [id]/
â”‚           â””â”€â”€ ğŸ“„ page.tsx          # å®éªŒè¯¦æƒ…
â”‚
â”œâ”€â”€ ğŸ“ components/                   # React ç»„ä»¶ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“„ Nav.tsx                   # å¯¼èˆªæ ç»„ä»¶
â”‚   â”œâ”€â”€ ğŸ“„ ClientProviders.tsx       # å®¢æˆ·ç«¯ Providerï¼ˆåŠ¨æ€å¯¼å…¥ï¼‰
â”‚   â”œâ”€â”€ ğŸ“ cosmic/                   # å®‡å®™ä¸»é¢˜ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ index.ts              # ç»Ÿä¸€å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ CosmicBackground.tsx  # å®‡å®™èƒŒæ™¯ï¼ˆæ˜Ÿç‚¹ã€æå…‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ CosmicCard.tsx        # æ¯›ç»ç’ƒå¡ç‰‡
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ CosmicFooter.tsx      # é¡µè„šç»„ä»¶
â”‚   â”‚   â””â”€â”€ ğŸ“„ PlanetCursor.tsx      # é¼ æ ‡è·Ÿéšæ˜Ÿçƒ
â”‚   â”œâ”€â”€ ğŸ“ home/                     # é¦–é¡µä¸“ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ index.ts              # ç»Ÿä¸€å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Scene3D.tsx           # Three.js åœºæ™¯å®¹å™¨
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ParticleField.tsx     # 3D ç²’å­é“¶æ²³ç³»
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ FloatingGeometry.tsx  # æ¼‚æµ®å‡ ä½•ä½“
â”‚   â”‚   â””â”€â”€ ğŸ“„ GlassCard.tsx         # 3D ç»ç’ƒå¡ç‰‡
â”‚   â”œâ”€â”€ ğŸ“ portfolio/                # ä½œå“é›†ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ GalaxyShowcase.tsx    # é“¶æ²³ç³»ä½œå“å±•ç¤º
â”‚   â”‚   â””â”€â”€ ğŸ“„ ShowcaseCabinet.tsx   # å±•ç¤ºæŸœé£æ ¼å±•ç¤º
â”‚   â””â”€â”€ ğŸ“ lab/                      # å®éªŒå®¤ç»„ä»¶
â”‚       â”œâ”€â”€ ğŸ“„ CodeDisplay.tsx       # ä»£ç å±•ç¤º
â”‚       â””â”€â”€ ğŸ“„ ExperimentLoader.tsx  # å®éªŒåŠ è½½å™¨
â”‚
â”œâ”€â”€ ğŸ“ src/                          # æºä»£ç ç›®å½•
â”‚   â””â”€â”€ ğŸ“ lib/                      # å·¥å…·åº“
â”‚       â”œâ”€â”€ ğŸ“„ posts.ts              # æ–‡ç« æ•°æ®å¤„ç†
â”‚       â”œâ”€â”€ ğŸ“„ projects.ts           # ä½œå“æ•°æ®
â”‚       â”œâ”€â”€ ğŸ“„ experiments.ts        # å®éªŒæ•°æ®
â”‚       â””â”€â”€ ğŸ“„ experimentCode.ts     # å®éªŒä»£ç è·å–
â”‚
â”œâ”€â”€ ğŸ“ content/                      # å†…å®¹ç›®å½•
â”‚   â””â”€â”€ ğŸ“ posts/                    # MDX æ–‡ç« 
â”‚       â”œâ”€â”€ ğŸ“„ welcome.mdx
â”‚       â”œâ”€â”€ ğŸ“„ getting-started.mdx
â”‚       â””â”€â”€ ğŸ“„ example-code.mdx
â”‚
â”œâ”€â”€ ğŸ“ docs/                         # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“„ COSMIC-THEME-TUTORIAL.md  # å®‡å®™ä¸»é¢˜æ•™ç¨‹
â”‚   â”œâ”€â”€ ğŸ“„ PORTFOLIO-SHOWCASE-TUTORIAL.md
â”‚   â””â”€â”€ ğŸ“„ ...
â”‚
â”œâ”€â”€ ğŸ“ public/                       # é™æ€èµ„æº
â”‚   â””â”€â”€ ğŸ“„ *.svg                     # å›¾æ ‡æ–‡ä»¶
â”‚
â”œâ”€â”€ ğŸ“„ package.json                  # ä¾èµ–é…ç½®
â”œâ”€â”€ ğŸ“„ tailwind.config.ts            # Tailwind é…ç½®
â”œâ”€â”€ ğŸ“„ next.config.ts                # Next.js é…ç½®
â””â”€â”€ ğŸ“„ tsconfig.json                 # TypeScript é…ç½®
```

### 3.2 å„ç›®å½•èŒè´£è¯´æ˜

| ç›®å½• | èŒè´£ | è¯´æ˜ |
|------|------|------|
| `app/` | é¡µé¢è·¯ç”± | Next.js App Routerï¼Œæ–‡ä»¶å³è·¯ç”± |
| `components/` | UI ç»„ä»¶ | å¯å¤ç”¨çš„ React ç»„ä»¶ |
| `src/lib/` | æ•°æ®é€»è¾‘ | æ•°æ®è·å–ã€å¤„ç†å‡½æ•° |
| `content/` | å†…å®¹æ–‡ä»¶ | MDX æ–‡ç« ã€é…ç½®ç­‰ |
| `public/` | é™æ€èµ„æº | å›¾ç‰‡ã€å­—ä½“ã€å›¾æ ‡ |
| `docs/` | é¡¹ç›®æ–‡æ¡£ | å¼€å‘æŒ‡å—ã€æ•™ç¨‹ |

---

## 4. æ ¸å¿ƒä¾èµ–åº“è¯¦è§£

### 4.1 package.json ä¾èµ–åˆ†æ


```json
{
  "dependencies": {
    // ===== æ ¸å¿ƒæ¡†æ¶ =====
    "next": "16.1.1",           // React å…¨æ ˆæ¡†æ¶
    "react": "19.2.3",          // UI åº“
    "react-dom": "19.2.3",      // React DOM æ¸²æŸ“

    // ===== 3D æ¸²æŸ“ =====
    "three": "^0.182.0",        // WebGL 3D åº“
    "@react-three/fiber": "^9.4.2",  // React Three.js ç»‘å®š
    "@react-three/drei": "^10.7.7",  // Three.js å·¥å…·ç»„ä»¶

    // ===== å†…å®¹å¤„ç† =====
    "@mdx-js/loader": "^3.0.1",      // MDX åŠ è½½å™¨
    "@mdx-js/react": "^3.0.1",       // MDX React ç»„ä»¶
    "@next/mdx": "^16.1.1",          // Next.js MDX é›†æˆ
    "gray-matter": "^4.0.3",         // frontmatter è§£æ
    "react-markdown": "^9.0.1",      // Markdown æ¸²æŸ“

    // ===== Markdown å¢å¼º =====
    "remark-gfm": "^4.0.0",          // GitHub é£æ ¼ Markdown
    "rehype-highlight": "^7.0.1",    // ä»£ç é«˜äº®
    "rehype-raw": "^7.0.0",          // åŸå§‹ HTML æ”¯æŒ
    "highlight.js": "^11.11.1",      // è¯­æ³•é«˜äº®å¼•æ“

    // ===== å·¥å…·åº“ =====
    "date-fns": "^4.1.0",            // æ—¥æœŸå¤„ç†
    "slugify": "^1.6.6"              // URL slug ç”Ÿæˆ
  },
  "devDependencies": {
    // ===== æ ·å¼ =====
    "tailwindcss": "^4",             // CSS æ¡†æ¶
    "@tailwindcss/postcss": "^4",    // PostCSS æ’ä»¶

    // ===== ç±»å‹å®šä¹‰ =====
    "@types/node": "^20",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "@types/three": "^0.182.0",

    // ===== å¼€å‘å·¥å…· =====
    "typescript": "^5",
    "eslint": "^9",
    "eslint-config-next": "16.1.1",
    "tsx": "^4.21.0"                 // TypeScript æ‰§è¡Œå™¨
  }
}
```

### 4.2 å„ä¾èµ–åº“è¯¦ç»†è¯´æ˜

#### 4.2.1 Three.js ç”Ÿæ€

**three (Three.js)**
- **ä½œç”¨**ï¼šWebGL 3D æ¸²æŸ“åº“
- **ä¸ºä»€ä¹ˆç”¨**ï¼šåˆ›å»º 3D é“¶æ²³ç³»ç²’å­æ•ˆæœ
- **æ ¸å¿ƒæ¦‚å¿µ**ï¼š
  - `Scene`ï¼šåœºæ™¯å®¹å™¨
  - `Camera`ï¼šè§†è§’ç›¸æœº
  - `Renderer`ï¼šæ¸²æŸ“å™¨
  - `Geometry`ï¼šå‡ ä½•ä½“
  - `Material`ï¼šæè´¨
  - `Mesh`ï¼šç½‘æ ¼ï¼ˆå‡ ä½•ä½“ + æè´¨ï¼‰

**@react-three/fiber**
- **ä½œç”¨**ï¼šThree.js çš„ React æ¸²æŸ“å™¨
- **ä¸ºä»€ä¹ˆç”¨**ï¼šç”¨ JSX å£°æ˜å¼å†™ 3D åœºæ™¯
- **ä¼˜åŠ¿**ï¼š
  - ç»„ä»¶åŒ– 3D å¼€å‘
  - è‡ªåŠ¨å¤„ç†æ¸²æŸ“å¾ªç¯
  - ä¸ React çŠ¶æ€æ— ç¼é›†æˆ

**ä½¿ç”¨å¯¹æ¯”ï¼š**
```javascript
// åŸç”Ÿ Three.jsï¼ˆå‘½ä»¤å¼ï¼‰
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(75, width/height, 0.1, 1000);
const renderer = new THREE.WebGLRenderer();
const geometry = new THREE.SphereGeometry(1, 32, 32);
const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
const sphere = new THREE.Mesh(geometry, material);
scene.add(sphere);
renderer.render(scene, camera);
```

```tsx
// React Three Fiberï¼ˆå£°æ˜å¼ï¼‰
<Canvas camera={{ position: [0, 0, 5], fov: 75 }}>
  <mesh>
    <sphereGeometry args={[1, 32, 32]} />
    <meshBasicMaterial color="green" />
  </mesh>
</Canvas>
```

**@react-three/drei**
- **ä½œç”¨**ï¼šThree.js å¸¸ç”¨ç»„ä»¶å’Œå·¥å…·é›†
- **ä¸ºä»€ä¹ˆç”¨**ï¼šæä¾›å¼€ç®±å³ç”¨çš„ 3D ç»„ä»¶
- **å¸¸ç”¨ç»„ä»¶**ï¼š
  - `MeshDistortMaterial`ï¼šå˜å½¢æè´¨
  - `OrbitControls`ï¼šè½¨é“æ§åˆ¶å™¨
  - `Text`ï¼š3D æ–‡å­—
  - `Environment`ï¼šç¯å¢ƒè´´å›¾

#### 4.2.2 MDX ç”Ÿæ€

**MDX æ˜¯ä»€ä¹ˆï¼Ÿ**
MDX = Markdown + JSXï¼Œå¯ä»¥åœ¨ Markdown ä¸­ä½¿ç”¨ React ç»„ä»¶ã€‚

```mdx
# æˆ‘çš„æ–‡ç« 

è¿™æ˜¯æ™®é€š Markdown æ–‡æœ¬ã€‚

<CustomAlert type="warning">
  è¿™æ˜¯ä¸€ä¸ª React ç»„ä»¶ï¼
</CustomAlert>

```javascript
console.log('ä»£ç å—ä¹Ÿæ”¯æŒ');
```
```

**gray-matter**
- **ä½œç”¨**ï¼šè§£æ Markdown æ–‡ä»¶çš„ frontmatter
- **ä¸ºä»€ä¹ˆç”¨**ï¼šæå–æ–‡ç« å…ƒæ•°æ®ï¼ˆæ ‡é¢˜ã€æ—¥æœŸã€æ ‡ç­¾ï¼‰

```markdown
---
title: "æˆ‘çš„æ–‡ç« "
date: "2025-01-01"
tags: ["React", "Next.js"]
---

æ–‡ç« æ­£æ–‡...
```

```typescript
import matter from 'gray-matter';

const { data, content } = matter(fileContents);
// data = { title: "æˆ‘çš„æ–‡ç« ", date: "2025-01-01", tags: [...] }
// content = "æ–‡ç« æ­£æ–‡..."
```

**remark-gfm**
- **ä½œç”¨**ï¼šæ”¯æŒ GitHub é£æ ¼ Markdown
- **æ”¯æŒç‰¹æ€§**ï¼š
  - è¡¨æ ¼
  - ä»»åŠ¡åˆ—è¡¨ `- [x]`
  - åˆ é™¤çº¿ `~~text~~`
  - è‡ªåŠ¨é“¾æ¥

**rehype-highlight**
- **ä½œç”¨**ï¼šä»£ç å—è¯­æ³•é«˜äº®
- **ä¸ºä»€ä¹ˆç”¨**ï¼šè®©ä»£ç æ›´æ˜“è¯»
- **é…åˆ**ï¼š`highlight.js` æä¾›é«˜äº®ä¸»é¢˜

#### 4.2.3 å·¥å…·åº“

**date-fns**
- **ä½œç”¨**ï¼šæ—¥æœŸæ ¼å¼åŒ–å’Œå¤„ç†
- **ä¸ºä»€ä¹ˆç”¨**ï¼šè½»é‡çº§ï¼Œtree-shaking å‹å¥½
- **ä½¿ç”¨ç¤ºä¾‹**ï¼š

```typescript
import { format, parseISO } from 'date-fns';
import { zhCN } from 'date-fns/locale';

const date = parseISO('2025-01-01');
format(date, 'yyyyå¹´MMæœˆddæ—¥', { locale: zhCN });
// â†’ "2025å¹´01æœˆ01æ—¥"
```

**slugify**
- **ä½œç”¨**ï¼šç”Ÿæˆ URL å‹å¥½çš„ slug
- **ä¸ºä»€ä¹ˆç”¨**ï¼šæ–‡ç« æ ‡é¢˜è½¬ URL

```typescript
import slugify from 'slugify';

slugify('æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« ', { lower: true });
// â†’ "wo-de-di-yi-pian-wen-zhang"
```

---

## 5. é…ç½®æ–‡ä»¶è¯¦è§£

### 5.1 next.config.ts


```typescript
// next.config.ts
import type { NextConfig } from 'next';

const nextConfig: NextConfig = {
  // é¡µé¢æ‰©å±•åé…ç½®ï¼Œæ”¯æŒ MDX
  pageExtensions: ['js', 'jsx', 'ts', 'tsx', 'md', 'mdx'],
  
  // å®éªŒæ€§åŠŸèƒ½
  experimental: {
    // MDX æ”¯æŒ
    mdxRs: true,
  },
  
  // å›¾ç‰‡åŸŸåç™½åå•
  images: {
    domains: ['example.com'],
  },
};

export default nextConfig;
```

**é…ç½®è¯´æ˜ï¼š**
- `pageExtensions`ï¼šå…è®¸ `.mdx` æ–‡ä»¶ä½œä¸ºé¡µé¢
- `mdxRs`ï¼šä½¿ç”¨ Rust ç¼–è¯‘çš„ MDX è§£æå™¨ï¼ˆæ›´å¿«ï¼‰
- `images.domains`ï¼šå…è®¸çš„å¤–éƒ¨å›¾ç‰‡åŸŸå

### 5.2 tailwind.config.ts

```typescript
// tailwind.config.ts
import type { Config } from 'tailwindcss';

const config: Config = {
  // æ‰«æè¿™äº›æ–‡ä»¶ä¸­çš„ç±»å
  content: [
    './app/**/*.{js,ts,jsx,tsx,mdx}',
    './src/**/*.{js,ts,jsx,tsx,mdx}',
    './components/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  
  theme: {
    extend: {
      // å®¹å™¨å±…ä¸­
      container: {
        center: true,
      },
      
      // è‡ªå®šä¹‰é¢œè‰²ï¼ˆå¯é€‰ï¼Œæˆ‘ä»¬ç”¨ CSS å˜é‡ï¼‰
      colors: {
        cosmic: {
          purple: '#7b2cbf',
          pink: '#e94560',
          cyan: '#00d9ff',
          gold: '#f5d042',
        },
      },
      
      // è‡ªå®šä¹‰åŠ¨ç”»
      animation: {
        'float': 'float 6s ease-in-out infinite',
        'twinkle': 'twinkle 3s ease-in-out infinite',
      },
      
      keyframes: {
        float: {
          '0%, 100%': { transform: 'translateY(0)' },
          '50%': { transform: 'translateY(-20px)' },
        },
        twinkle: {
          '0%, 100%': { opacity: '0.2' },
          '50%': { opacity: '1' },
        },
      },
    },
  },
  
  plugins: [],
};

export default config;
```

**é…ç½®è¯´æ˜ï¼š**
- `content`ï¼šTailwind æ‰«æè¿™äº›æ–‡ä»¶æå–ç±»å
- `theme.extend`ï¼šæ‰©å±•é»˜è®¤ä¸»é¢˜
- `animation/keyframes`ï¼šè‡ªå®šä¹‰åŠ¨ç”»

### 5.3 tsconfig.json

```json
{
  "compilerOptions": {
    // ç›®æ ‡ ES ç‰ˆæœ¬
    "target": "ES2017",
    
    // æ¨¡å—ç³»ç»Ÿ
    "module": "ESNext",
    "moduleResolution": "bundler",
    
    // ä¸¥æ ¼æ¨¡å¼
    "strict": true,
    "noEmit": true,
    
    // JSX å¤„ç†
    "jsx": "preserve",
    
    // è·¯å¾„åˆ«å
    "paths": {
      "@/*": ["./*"],
      "@/components/*": ["./components/*"],
      "@/src/*": ["./src/*"]
    },
    
    // å¢é‡ç¼–è¯‘
    "incremental": true,
    
    // æ’ä»¶
    "plugins": [
      { "name": "next" }
    ]
  },
  
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts"
  ],
  
  "exclude": ["node_modules"]
}
```

**è·¯å¾„åˆ«åä½¿ç”¨ï¼š**
```typescript
// ä¸ç”¨è·¯å¾„åˆ«å
import { CosmicCard } from '../../../components/cosmic/CosmicCard';

// ä½¿ç”¨è·¯å¾„åˆ«å
import { CosmicCard } from '@/components/cosmic';
```

---

## 6. å…¨å±€æ ·å¼ç³»ç»Ÿ

### 6.1 CSS å˜é‡ç³»ç»Ÿ (globals.css)

å®‡å®™ä¸»é¢˜çš„æ ¸å¿ƒæ˜¯ CSS å˜é‡ç³»ç»Ÿï¼Œå®šä¹‰åœ¨ `:root` ä¸­ï¼š

```css
/* ===== å®‡å®™ä¸»é¢˜è‰²å½©ç³»ç»Ÿ ===== */
:root {
  /* ä¸»è‰²è°ƒ - æ·±é‚ƒçš„å®‡å®™æ„Ÿ */
  --cosmic-deep-purple: #1a1a2e;   /* æ·±ç´« - ä¸»èƒŒæ™¯ */
  --cosmic-space-blue: #16213e;    /* æ˜Ÿç©ºè“ - æ¬¡èƒŒæ™¯ */
  --cosmic-nebula-pink: #e94560;   /* æ˜Ÿäº‘ç²‰ - å¼ºè°ƒè‰² */
  --cosmic-dark-blue: #0f3460;     /* æ·±è“ - æ¸å˜è¿‡æ¸¡ */
  
  /* ç‚¹ç¼€è‰² - æ˜Ÿå…‰æ•ˆæœ */
  --cosmic-star-gold: #f5d042;     /* æ˜Ÿå…‰é‡‘ */
  --cosmic-aurora-green: #00d9ff;  /* æå…‰é’ */
  --cosmic-violet: #7b2cbf;        /* å®‡å®™ç´« */
  --cosmic-soft-pink: #ff6b9d;     /* æŸ”ç²‰ */
  
  /* æ¸å˜å®šä¹‰ */
  --gradient-cosmic: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
  --gradient-aurora: linear-gradient(45deg, #00d9ff 0%, #7b2cbf 50%, #e94560 100%);
  --gradient-nebula: linear-gradient(180deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
  
  /* å…‰æ™•æ•ˆæœ */
  --glow-pink: 0 0 30px rgba(233, 69, 96, 0.4);
  --glow-blue: 0 0 30px rgba(0, 217, 255, 0.4);
  --glow-violet: 0 0 30px rgba(123, 44, 191, 0.4);
  
  /* æµ…è‰²æ¨¡å¼è¡¨é¢è‰² */
  --background: #f8f9ff;
  --foreground: #1a1a2e;
  --surface: rgba(255, 255, 255, 0.9);
}

/* æ·±è‰²æ¨¡å¼è¦†ç›– */
@media (prefers-color-scheme: dark) {
  :root {
    --background: #0d0d1a;
    --foreground: #e6e6e6;
    --surface: rgba(22, 33, 62, 0.6);
  }
}
```

**è‰²å½©å¿ƒç†å­¦ï¼š**

| é¢œè‰² | å˜é‡ | æƒ…æ„Ÿ | ä½¿ç”¨åœºæ™¯ |
|------|------|------|----------|
| æ·±ç´« | `--cosmic-deep-purple` | ç¥ç§˜ã€æ·±é‚ƒ | èƒŒæ™¯ã€å¤§é¢ç§¯åŒºåŸŸ |
| æ˜Ÿäº‘ç²‰ | `--cosmic-nebula-pink` | æ´»åŠ›ã€çƒ­æƒ… | CTA æŒ‰é’®ã€é‡è¦æç¤º |
| æå…‰é’ | `--cosmic-aurora-green` | ç§‘æŠ€ã€æœªæ¥ | é“¾æ¥ã€äº¤äº’å…ƒç´  |
| æ˜Ÿå…‰é‡‘ | `--cosmic-star-gold` | çè´µã€é«˜çº§ | è£…é¥°ã€å¾½ç«  |
| å®‡å®™ç´« | `--cosmic-violet` | åˆ›æ„ã€ç¥ç§˜ | ä¸»è‰²è°ƒã€å“ç‰Œè‰² |

### 6.2 æ ¸å¿ƒåŠ¨ç”»å®šä¹‰


```css
/* ===== æ˜Ÿç‚¹é—ªçƒåŠ¨ç”» ===== */
@keyframes twinkle {
  0%, 100% { 
    opacity: 0.2; 
    transform: scale(1); 
  }
  50% { 
    opacity: 1; 
    transform: scale(1.2); 
  }
}

/* ä½¿ç”¨æ–¹å¼ */
.star {
  animation: twinkle var(--twinkle-duration, 3s) ease-in-out infinite;
  animation-delay: var(--twinkle-delay, 0s);
}

/* ===== æå…‰æµåŠ¨æ•ˆæœ ===== */
@keyframes aurora-flow {
  0%, 100% { 
    transform: translateX(-10%) rotate(-5deg); 
    opacity: 0.5; 
  }
  50% { 
    transform: translateX(10%) rotate(5deg); 
    opacity: 0.8; 
  }
}

.aurora {
  position: absolute;
  width: 150%;
  height: 60%;
  top: -20%;
  left: -25%;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(0, 217, 255, 0.1) 20%,
    rgba(123, 44, 191, 0.15) 40%,
    rgba(233, 69, 96, 0.1) 60%,
    rgba(0, 217, 255, 0.1) 80%,
    transparent 100%
  );
  filter: blur(60px);
  animation: aurora-flow 15s ease-in-out infinite;
}

/* ===== æ¸å˜æ–‡å­—åŠ¨ç”» ===== */
@keyframes gradient-shift {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

.glow-text {
  background: var(--gradient-cosmic);
  background-size: 200% 200%;
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: gradient-shift 6s ease infinite;
}

/* ===== å…¥åœºåŠ¨ç”» ===== */
@keyframes fade-in-up {
  from { 
    opacity: 0; 
    transform: translateY(30px); 
  }
  to { 
    opacity: 1; 
    transform: translateY(0); 
  }
}

.animate-fade-in-up {
  animation: fade-in-up 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

/* åŠ¨ç”»å»¶è¿Ÿå·¥å…·ç±» */
.delay-100 { animation-delay: 100ms; }
.delay-200 { animation-delay: 200ms; }
.delay-300 { animation-delay: 300ms; }
```

### 6.3 å®‡å®™å¡ç‰‡æ ·å¼

```css
/* ===== æ¯›ç»ç’ƒå¡ç‰‡ ===== */
.cosmic-card {
  /* æ¯›ç»ç’ƒèƒŒæ™¯ */
  background: var(--surface);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  
  /* è¾¹æ¡† */
  border: 1px solid rgba(123, 44, 191, 0.1);
  border-radius: 1.5rem;
  
  /* å®šä½ */
  position: relative;
  overflow: hidden;
  
  /* è¿‡æ¸¡ */
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

/* æ¸å˜è¾¹æ¡†æ•ˆæœ - ä½¿ç”¨ mask æŠ€å·§ */
.cosmic-card::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  padding: 1px;
  background: linear-gradient(
    135deg,
    rgba(0, 217, 255, 0.3) 0%,
    rgba(123, 44, 191, 0.2) 50%,
    rgba(233, 69, 96, 0.3) 100%
  );
  /* mask æŠ€å·§ï¼šåªæ˜¾ç¤ºè¾¹æ¡†éƒ¨åˆ† */
  -webkit-mask: 
    linear-gradient(#fff 0 0) content-box, 
    linear-gradient(#fff 0 0);
  mask: 
    linear-gradient(#fff 0 0) content-box, 
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  opacity: 0;
  transition: opacity 0.4s ease;
}

/* æ‚¬åœæ—¶æ˜¾ç¤ºæ¸å˜è¾¹æ¡† */
.cosmic-card:hover::before {
  opacity: 1;
}

/* æ‚¬åœæ•ˆæœ */
.cosmic-card:hover {
  transform: translateY(-8px) scale(1.02);
  box-shadow: 
    0 25px 50px -12px rgba(0, 0, 0, 0.15),
    0 0 40px rgba(123, 44, 191, 0.1),
    0 0 80px rgba(0, 217, 255, 0.05);
}
```

**mask-composite æŠ€å·§è§£é‡Šï¼š**

è¿™æ˜¯åˆ›å»ºæ¸å˜è¾¹æ¡†çš„å…³é”®æŠ€å·§ï¼š

1. `padding: 1px` - åˆ›å»º 1px çš„å†…è¾¹è·
2. `background` - æ¸å˜èƒŒæ™¯å¡«å……æ•´ä¸ªå…ƒç´ 
3. `mask: content-box, border-box` - ä¸¤ä¸ªé®ç½©å±‚
4. `mask-composite: exclude` - æ’é™¤é‡å éƒ¨åˆ†

ç»“æœï¼šåªæœ‰è¾¹æ¡†éƒ¨åˆ†ï¼ˆpadding åŒºåŸŸï¼‰æ˜¾ç¤ºæ¸å˜ã€‚

---

## 7. æ ¸å¿ƒç»„ä»¶è¯¦è§£

### 7.1 CosmicBackground.tsx - å®‡å®™èƒŒæ™¯ç»„ä»¶

**æ–‡ä»¶ä½ç½®ï¼š** `components/cosmic/CosmicBackground.tsx`

**ä½œç”¨ï¼š** åˆ›å»ºæ·±é‚ƒçš„å®‡å®™èƒŒæ™¯ï¼ŒåŒ…å«æ˜Ÿç‚¹ã€æå…‰ã€æ¼‚æµ®å…‰çƒ

**å®Œæ•´ä»£ç è§£æï¼š**

```tsx
"use client"; // æ ‡è®°ä¸ºå®¢æˆ·ç«¯ç»„ä»¶ï¼ˆä½¿ç”¨äº† useState, useEffectï¼‰

import { useEffect, useRef, useState } from "react";

// ===== ç±»å‹å®šä¹‰ =====
interface Star {
  id: number;
  x: number;      // ä½ç½®ç™¾åˆ†æ¯” (0-100)
  y: number;
  size: "small" | "medium" | "large";
  delay: number;  // åŠ¨ç”»å»¶è¿Ÿ (ç§’)
  duration: number; // åŠ¨ç”»æ—¶é•¿ (ç§’)
}

interface FloatingOrb {
  id: number;
  x: number;
  y: number;
  size: number;   // åƒç´ 
  color: string;  // rgba é¢œè‰²
  blur: number;   // æ¨¡ç³Šç¨‹åº¦
  duration: number;
  delay: number;
}

interface CosmicBackgroundProps {
  variant?: "default" | "hero" | "subtle";  // å˜ä½“æ¨¡å¼
  starCount?: number;   // æ˜Ÿç‚¹æ•°é‡
  showAurora?: boolean; // æ˜¯å¦æ˜¾ç¤ºæå…‰
  showOrbs?: boolean;   // æ˜¯å¦æ˜¾ç¤ºå…‰çƒ
  className?: string;
}

// ===== ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ =====
// ä½¿ç”¨ç§å­ç¡®ä¿æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ç”Ÿæˆç›¸åŒçš„éšæœºæ•°ï¼Œé¿å… hydration ä¸åŒ¹é…
function seededRandom(seed: number): number {
  const x = Math.sin(seed * 9999) * 10000;
  return x - Math.floor(x);
}
```

**ä¸ºä»€ä¹ˆéœ€è¦ seededRandomï¼Ÿ**

Next.js çš„æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ä¼šåœ¨æœåŠ¡å™¨ç”Ÿæˆ HTMLï¼Œç„¶åå®¢æˆ·ç«¯ hydrateã€‚å¦‚æœä½¿ç”¨ `Math.random()`ï¼ŒæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¼šç”Ÿæˆä¸åŒçš„éšæœºæ•°ï¼Œå¯¼è‡´ hydration é”™è¯¯ã€‚

`seededRandom` ä½¿ç”¨ç›¸åŒçš„ç§å­ç”Ÿæˆç›¸åŒçš„"éšæœº"æ•°ï¼Œç¡®ä¿ä¸€è‡´æ€§ã€‚


```tsx
const CosmicBackground: React.FC<CosmicBackgroundProps> = ({
  variant = "default",
  starCount = 50,
  showAurora = true,
  showOrbs = true,
  className = "",
}) => {
  const containerRef = useRef<HTMLDivElement>(null);
  const [stars, setStars] = useState<Star[]>([]);
  const [mounted, setMounted] = useState(false);

  // ===== å®¢æˆ·ç«¯æŒ‚è½½åç”Ÿæˆæ˜Ÿç‚¹ =====
  useEffect(() => {
    setMounted(true);
    
    // ç”Ÿæˆæ˜Ÿç‚¹æ•°æ®
    const generatedStars: Star[] = Array.from({ length: starCount }, (_, i) => ({
      id: i,
      // ä½¿ç”¨ seededRandom ç¡®ä¿ SSR ä¸€è‡´æ€§
      x: seededRandom(i * 3 + 1) * 100,
      y: seededRandom(i * 3 + 2) * 100,
      // 10% å¤§æ˜Ÿï¼Œ30% ä¸­æ˜Ÿï¼Œ60% å°æ˜Ÿ
      size: seededRandom(i * 3 + 3) > 0.9 ? "large" : 
            seededRandom(i * 3 + 3) > 0.6 ? "medium" : "small",
      delay: seededRandom(i * 3 + 4) * 5,      // 0-5ç§’å»¶è¿Ÿ
      duration: 2 + seededRandom(i * 3 + 5) * 3, // 2-5ç§’æ—¶é•¿
    }));
    
    setStars(generatedStars);
  }, [starCount]);

  // ===== å›ºå®šçš„æ¼‚æµ®å…‰çƒé…ç½® =====
  const orbs: FloatingOrb[] = showOrbs ? [
    { id: 1, x: 15, y: 20, size: 300, color: "rgba(123, 44, 191, 0.15)", blur: 80, duration: 20, delay: 0 },
    { id: 2, x: 75, y: 60, size: 250, color: "rgba(233, 69, 96, 0.12)", blur: 70, duration: 25, delay: 5 },
    { id: 3, x: 50, y: 80, size: 200, color: "rgba(0, 217, 255, 0.1)", blur: 60, duration: 18, delay: 3 },
    { id: 4, x: 85, y: 15, size: 180, color: "rgba(245, 208, 66, 0.08)", blur: 50, duration: 22, delay: 8 },
  ] : [];

  // ===== è§†å·®æ•ˆæœï¼ˆä»… hero æ¨¡å¼ï¼‰=====
  useEffect(() => {
    if (variant !== "hero") return;

    const handleMouseMove = (e: MouseEvent) => {
      const container = containerRef.current;
      if (!container) return;

      const { clientX, clientY } = e;
      const { innerWidth, innerHeight } = window;
      
      // è®¡ç®—é¼ æ ‡ä½ç½®ç™¾åˆ†æ¯” (-1 åˆ° 1)
      const xPercent = (clientX / innerWidth - 0.5) * 2;
      const yPercent = (clientY / innerHeight - 0.5) * 2;

      // ç§»åŠ¨å…‰çƒï¼Œä¸åŒæ·±åº¦ä¸åŒä½ç§»
      const orbElements = container.querySelectorAll(".floating-orb");
      orbElements.forEach((orb, index) => {
        const depth = (index + 1) * 10; // æ·±åº¦ç³»æ•°
        const x = xPercent * depth;
        const y = yPercent * depth;
        (orb as HTMLElement).style.transform = `translate(${x}px, ${y}px)`;
      });
    };

    window.addEventListener("mousemove", handleMouseMove);
    return () => window.removeEventListener("mousemove", handleMouseMove);
  }, [variant]);

  // ===== æ˜Ÿç‚¹å¤§å°æ˜ å°„ =====
  const getStarSize = (size: Star["size"]) => {
    switch (size) {
      case "large": return "w-1 h-1";    // 4px
      case "medium": return "w-0.5 h-0.5"; // 2px
      default: return "w-px h-px";        // 1px
    }
  };

  return (
    <div
      ref={containerRef}
      className={`fixed inset-0 overflow-hidden pointer-events-none ${className}`}
      style={{ zIndex: 0 }}
    >
      {/* åŸºç¡€æ¸å˜èƒŒæ™¯ */}
      <div className="absolute inset-0 cosmic-bg" />

      {/* å™ªç‚¹çº¹ç† - å¢åŠ è´¨æ„Ÿ */}
      <div className="absolute inset-0 noise-texture" />

      {/* æå…‰æ•ˆæœ */}
      {showAurora && variant !== "subtle" && (
        <div className="aurora" />
      )}

      {/* æ¼‚æµ®å…‰çƒ */}
      {orbs.map((orb) => (
        <div
          key={orb.id}
          className="floating-orb absolute rounded-full transition-transform duration-300 ease-out"
          style={{
            left: `${orb.x}%`,
            top: `${orb.y}%`,
            width: orb.size,
            height: orb.size,
            background: orb.color,
            filter: `blur(${orb.blur}px)`,
            animation: `float-slow ${orb.duration}s ease-in-out infinite`,
            animationDelay: `${orb.delay}s`,
            transform: "translate(-50%, -50%)",
          }}
        />
      ))}

      {/* æ˜Ÿç‚¹ - åªåœ¨å®¢æˆ·ç«¯æ¸²æŸ“ */}
      {mounted && (
        <div className="absolute inset-0">
          {stars.map((star) => (
            <div
              key={star.id}
              className={`absolute rounded-full bg-white ${getStarSize(star.size)}`}
              style={{
                left: `${star.x}%`,
                top: `${star.y}%`,
                animation: `twinkle ${star.duration}s ease-in-out infinite`,
                animationDelay: `${star.delay}s`,
                // å¤§æ˜Ÿæ·»åŠ å…‰æ™•
                boxShadow: star.size === "large" 
                  ? "0 0 6px 2px rgba(255, 255, 255, 0.4)" 
                  : star.size === "medium"
                  ? "0 0 3px 1px rgba(255, 255, 255, 0.2)"
                  : "none",
              }}
            />
          ))}
        </div>
      )}

      {/* Hero æ¨¡å¼é¢å¤–è£…é¥° */}
      {variant === "hero" && (
        <>
          {/* æ˜Ÿäº‘å…‰æ™• */}
          <div
            className="absolute animate-pulse-slow"
            style={{
              right: "5%",
              top: "15%",
              width: "200px",
              height: "200px",
              background: "radial-gradient(circle, rgba(123, 44, 191, 0.15) 0%, transparent 70%)",
              filter: "blur(40px)",
            }}
          />
          
          {/* æµæ˜Ÿæ•ˆæœ */}
          <div
            className="absolute"
            style={{
              right: "30%",
              top: "20%",
              width: "100px",
              height: "1px",
              background: "linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent)",
              transform: "rotate(-45deg)",
              animation: "shooting-star 8s ease-in-out infinite",
            }}
          />
        </>
      )}
    </div>
  );
};

export default CosmicBackground;
```

**å…³é”®æŠ€æœ¯ç‚¹æ€»ç»“ï¼š**

1. **`"use client"`**ï¼šæ ‡è®°ä¸ºå®¢æˆ·ç«¯ç»„ä»¶
2. **`seededRandom`**ï¼šé¿å… SSR hydration ä¸åŒ¹é…
3. **`mounted` çŠ¶æ€**ï¼šæ˜Ÿç‚¹åªåœ¨å®¢æˆ·ç«¯æ¸²æŸ“
4. **`pointer-events: none`**ï¼šèƒŒæ™¯ä¸é˜»æŒ¡ç”¨æˆ·äº¤äº’
5. **`fixed inset-0`**ï¼šå›ºå®šå®šä½ï¼Œè¦†ç›–æ•´ä¸ªè§†å£
6. **è§†å·®æ•ˆæœ**ï¼šé¼ æ ‡ç§»åŠ¨æ—¶å…‰çƒè·Ÿéš

### 7.2 PlanetCursor.tsx - é¼ æ ‡è·Ÿéšæ˜Ÿçƒ

**æ–‡ä»¶ä½ç½®ï¼š** `components/cosmic/PlanetCursor.tsx`

**ä½œç”¨ï¼š** åˆ›å»ºè·Ÿéšé¼ æ ‡çš„è¡Œæ˜Ÿæ•ˆæœï¼Œå¸¦å¼¹æ€§åŠ¨ç”»

**æ ¸å¿ƒç®—æ³•ï¼šå¼¹æ€§æ’å€¼**

```tsx
// å¼¹æ€§æ’å€¼å…¬å¼
// current += (target - current) * ease
// ease è¶Šå°ï¼Œè·Ÿéšè¶Šæ…¢ï¼Œå¼¹æ€§è¶Šå¼º

const ease = 1 - planet.delay; // delay è¶Šå¤§ï¼Œease è¶Šå°
currentPos.x += (targetX - currentPos.x) * ease;
currentPos.y += (targetY - currentPos.y) * ease;
```

**å®Œæ•´ä»£ç è§£æï¼š**


```tsx
"use client";

import { useEffect, useRef, useState } from "react";

// ===== è¡Œæ˜Ÿé…ç½® =====
interface Planet {
  id: number;
  size: number;        // ç›´å¾„ï¼ˆåƒç´ ï¼‰
  color: string;       // ä¸»è‰²
  orbitRadius: number; // è½¨é“åŠå¾„
  delay: number;       // è·Ÿéšå»¶è¿Ÿ (0-1)
  glowColor: string;   // å…‰æ™•é¢œè‰²
}

// é»˜è®¤è¡Œæ˜Ÿé…ç½® - 4é¢—ä¸åŒé¢œè‰²çš„è¡Œæ˜Ÿ
const defaultPlanets: Planet[] = [
  { id: 1, size: 14, color: "#e94560", orbitRadius: 25, delay: 0.08, glowColor: "rgba(233, 69, 96, 0.6)" },
  { id: 2, size: 10, color: "#00d9ff", orbitRadius: 45, delay: 0.15, glowColor: "rgba(0, 217, 255, 0.5)" },
  { id: 3, size: 7, color: "#f5d042", orbitRadius: 65, delay: 0.22, glowColor: "rgba(245, 208, 66, 0.5)" },
  { id: 4, size: 5, color: "#7b2cbf", orbitRadius: 85, delay: 0.30, glowColor: "rgba(123, 44, 191, 0.4)" },
];

const PlanetCursor: React.FC<{ enabled?: boolean }> = ({ enabled = true }) => {
  const [isMobile, setIsMobile] = useState(true); // é»˜è®¤å‡è®¾ç§»åŠ¨ç«¯
  const [isHovering, setIsHovering] = useState(false);
  
  // ä½¿ç”¨ ref å­˜å‚¨ä½ç½®ï¼Œé¿å…é¢‘ç¹ setState å¯¼è‡´é‡æ¸²æŸ“
  const mousePos = useRef({ x: 0, y: 0 });
  const planetPositions = useRef(
    defaultPlanets.map(() => ({ x: 0, y: 0 }))
  );
  const containerRef = useRef<HTMLDivElement>(null);
  const animationRef = useRef<number | undefined>(undefined);

  // ===== ç§»åŠ¨ç«¯æ£€æµ‹ =====
  useEffect(() => {
    const checkMobile = () => {
      const isTouchDevice = "ontouchstart" in window || navigator.maxTouchPoints > 0;
      const isSmallScreen = window.innerWidth < 768;
      setIsMobile(isTouchDevice || isSmallScreen);
    };

    checkMobile();
    window.addEventListener("resize", checkMobile);
    return () => window.removeEventListener("resize", checkMobile);
  }, []);

  // ===== é¼ æ ‡è·Ÿè¸ª =====
  useEffect(() => {
    if (isMobile || !enabled) return;

    const handleMouseMove = (e: MouseEvent) => {
      mousePos.current = { x: e.clientX, y: e.clientY };
    };

    // æ£€æµ‹æ˜¯å¦æ‚¬åœåœ¨äº¤äº’å…ƒç´ ä¸Š
    const handleMouseOver = (e: MouseEvent) => {
      const target = e.target as HTMLElement;
      const isInteractive = 
        target.tagName === "A" ||
        target.tagName === "BUTTON" ||
        !!target.closest("a") ||
        !!target.closest("button");
      setIsHovering(isInteractive);
    };

    window.addEventListener("mousemove", handleMouseMove);
    window.addEventListener("mouseover", handleMouseOver);

    return () => {
      window.removeEventListener("mousemove", handleMouseMove);
      window.removeEventListener("mouseover", handleMouseOver);
    };
  }, [isMobile, enabled]);

  // ===== åŠ¨ç”»å¾ªç¯ =====
  useEffect(() => {
    if (isMobile || !enabled) return;

    const animate = () => {
      const container = containerRef.current;
      if (!container) {
        animationRef.current = requestAnimationFrame(animate);
        return;
      }

      const planets = container.children;
      
      defaultPlanets.forEach((planet, index) => {
        const currentPos = planetPositions.current[index];
        const targetX = mousePos.current.x;
        const targetY = mousePos.current.y;
        
        // ===== æ ¸å¿ƒï¼šå¼¹æ€§æ’å€¼ =====
        const ease = 1 - planet.delay;
        currentPos.x += (targetX - currentPos.x) * ease;
        currentPos.y += (targetY - currentPos.y) * ease;

        // ===== è½¨é“æ—‹è½¬ =====
        const time = Date.now() * 0.001; // ç§’
        const angle = time * (1 + index * 0.3) + index * (Math.PI / 2);
        // æ‚¬åœæ—¶è½¨é“æ”¶ç¼©
        const orbitX = Math.cos(angle) * planet.orbitRadius * (isHovering ? 0.5 : 1);
        const orbitY = Math.sin(angle) * planet.orbitRadius * (isHovering ? 0.5 : 1);

        // ç›´æ¥æ“ä½œ DOMï¼Œé¿å… React é‡æ¸²æŸ“
        const planetEl = planets[index] as HTMLElement;
        if (planetEl) {
          planetEl.style.transform = `translate(
            ${currentPos.x + orbitX - planet.size / 2}px, 
            ${currentPos.y + orbitY - planet.size / 2}px
          ) scale(${isHovering ? 1.2 : 1})`;
        }
      });

      animationRef.current = requestAnimationFrame(animate);
    };

    animationRef.current = requestAnimationFrame(animate);

    return () => {
      if (animationRef.current) {
        cancelAnimationFrame(animationRef.current);
      }
    };
  }, [isMobile, enabled, isHovering]);

  // ç§»åŠ¨ç«¯æˆ–ç¦ç”¨æ—¶ä¸æ¸²æŸ“
  if (isMobile || !enabled) return null;

  return (
    <div
      ref={containerRef}
      className="fixed inset-0 pointer-events-none z-50"
      style={{ overflow: "hidden" }}
    >
      {defaultPlanets.map((planet) => (
        <div
          key={planet.id}
          className="absolute rounded-full"
          style={{
            width: planet.size,
            height: planet.size,
            // å¾„å‘æ¸å˜åˆ›å»º 3D çƒä½“æ„Ÿ
            background: `radial-gradient(circle at 30% 30%, ${planet.color}, ${planet.color}88)`,
            // å…‰æ™• + å†…éƒ¨é«˜å…‰
            boxShadow: `
              0 0 ${planet.size}px ${planet.glowColor}, 
              inset 0 0 ${planet.size / 3}px rgba(255,255,255,0.3)
            `,
            willChange: "transform", // æç¤ºæµè§ˆå™¨ä¼˜åŒ–
          }}
        />
      ))}
    </div>
  );
};

export default PlanetCursor;
```

**å…³é”®æŠ€æœ¯ç‚¹ï¼š**

1. **å¼¹æ€§æ’å€¼ç®—æ³•**ï¼š`current += (target - current) * ease`
2. **requestAnimationFrame**ï¼š60fps æµç•…åŠ¨ç”»
3. **useRef å­˜å‚¨ä½ç½®**ï¼šé¿å… setState å¯¼è‡´é‡æ¸²æŸ“
4. **ç›´æ¥æ“ä½œ DOM**ï¼šæ€§èƒ½ä¼˜åŒ–
5. **ç§»åŠ¨ç«¯ç¦ç”¨**ï¼šè§¦æ‘¸è®¾å¤‡æ— é¼ æ ‡
6. **è½¨é“æ—‹è½¬**ï¼š`Math.cos/sin` è®¡ç®—åœ†å‘¨è¿åŠ¨

### 7.3 CosmicCard.tsx - æ¯›ç»ç’ƒå¡ç‰‡

**æ–‡ä»¶ä½ç½®ï¼š** `components/cosmic/CosmicCard.tsx`

**ä½œç”¨ï¼š** åˆ›å»ºå¸¦å…‰çº¿è¿½è¸ªæ•ˆæœçš„æ¯›ç»ç’ƒå¡ç‰‡

```tsx
"use client";

import { useRef, useState, useEffect } from "react";

interface CosmicCardProps {
  children: React.ReactNode;
  className?: string;
  delay?: number;           // å…¥åœºåŠ¨ç”»å»¶è¿Ÿ
  glowOnHover?: boolean;    // æ‚¬åœå‘å…‰
  showDecoration?: boolean; // è§’è½è£…é¥°
  hoverEffect?: boolean;    // æ‚¬åœæ•ˆæœ
}

const CosmicCard: React.FC<CosmicCardProps> = ({
  children,
  className = "",
  delay = 0,
  glowOnHover = true,
  showDecoration = true,
  hoverEffect = true,
}) => {
  const cardRef = useRef<HTMLDivElement>(null);
  const [mounted, setMounted] = useState(false);
  const [mousePosition, setMousePosition] = useState({ x: 0, y: 0 });
  const [isHovered, setIsHovered] = useState(false);

  // å…¥åœºåŠ¨ç”»å»¶è¿Ÿ
  useEffect(() => {
    const timer = setTimeout(() => setMounted(true), delay);
    return () => clearTimeout(timer);
  }, [delay]);

  // ===== å…‰çº¿è¿½è¸ªï¼šè®¡ç®—é¼ æ ‡åœ¨å¡ç‰‡å†…çš„ä½ç½® =====
  const handleMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {
    if (!hoverEffect || !cardRef.current) return;

    const rect = cardRef.current.getBoundingClientRect();
    // è½¬æ¢ä¸ºç™¾åˆ†æ¯” (0-100)
    const x = ((e.clientX - rect.left) / rect.width) * 100;
    const y = ((e.clientY - rect.top) / rect.height) * 100;
    setMousePosition({ x, y });
  };

  return (
    <div
      ref={cardRef}
      className={`
        cosmic-card relative p-6 md:p-8
        transition-all duration-500 ease-out
        ${mounted ? "opacity-100 translate-y-0" : "opacity-0 translate-y-8"}
        ${className}
      `}
      style={{ transitionDelay: `${delay}ms` }}
      onMouseMove={handleMouseMove}
      onMouseEnter={() => setIsHovered(true)}
      onMouseLeave={() => {
        setIsHovered(false);
        setMousePosition({ x: 50, y: 50 }); // é‡ç½®åˆ°ä¸­å¿ƒ
      }}
    >
      {/* ===== å…‰çº¿è¿½è¸ªæ•ˆæœ ===== */}
      {glowOnHover && isHovered && (
        <div
          className="absolute inset-0 rounded-[inherit] pointer-events-none"
          style={{
            // è·Ÿéšé¼ æ ‡çš„å¾„å‘æ¸å˜
            background: `radial-gradient(
              400px circle at ${mousePosition.x}% ${mousePosition.y}%,
              rgba(0, 217, 255, 0.15),
              rgba(123, 44, 191, 0.1) 40%,
              transparent 60%
            )`,
          }}
        />
      )}

      {/* ===== è§’è½è£…é¥°æ˜Ÿæ˜Ÿ ===== */}
      {showDecoration && (
        <>
          <div className="cosmic-card-decoration top-right" />
          <div className="cosmic-card-decoration bottom-left" />
        </>
      )}

      {/* å†…å®¹ */}
      <div className="relative z-10">{children}</div>
    </div>
  );
};

export default CosmicCard;
```

**å…‰çº¿è¿½è¸ªåŸç†ï¼š**

```
é¼ æ ‡ä½ç½® (clientX, clientY)
        â†“
è®¡ç®—ç›¸å¯¹å¡ç‰‡çš„ä½ç½®
        â†“
è½¬æ¢ä¸ºç™¾åˆ†æ¯” (0-100)
        â†“
ä½œä¸º radial-gradient çš„åœ†å¿ƒ
        â†“
åˆ›å»ºè·Ÿéšé¼ æ ‡çš„å…‰æ™•æ•ˆæœ
```

### 7.4 ClientProviders.tsx - å®¢æˆ·ç«¯ Provider

**æ–‡ä»¶ä½ç½®ï¼š** `components/ClientProviders.tsx`

**ä½œç”¨ï¼š** åŠ¨æ€å¯¼å…¥å®¢æˆ·ç«¯ç»„ä»¶ï¼Œé¿å… SSR é—®é¢˜


```tsx
"use client";

import dynamic from "next/dynamic";

// åŠ¨æ€å¯¼å…¥ PlanetCursorï¼Œç¦ç”¨ SSR
const PlanetCursor = dynamic(
  () => import("@/components/cosmic/PlanetCursor"),
  { ssr: false }
);

export default function ClientProviders() {
  return (
    <>
      <PlanetCursor />
    </>
  );
}
```

**ä¸ºä»€ä¹ˆéœ€è¦åŠ¨æ€å¯¼å…¥ï¼Ÿ**

`PlanetCursor` ä½¿ç”¨äº† `window` å¯¹è±¡ï¼ˆé¼ æ ‡äº‹ä»¶ã€å±å¹•å°ºå¯¸ï¼‰ï¼Œè¿™äº›åœ¨æœåŠ¡ç«¯ä¸å­˜åœ¨ã€‚

- `ssr: false`ï¼šç»„ä»¶åªåœ¨å®¢æˆ·ç«¯æ¸²æŸ“
- é¿å… `window is not defined` é”™è¯¯

### 7.5 Nav.tsx - å¯¼èˆªæ ç»„ä»¶

**æ–‡ä»¶ä½ç½®ï¼š** `components/Nav.tsx`

**ä½œç”¨ï¼š** å“åº”å¼å¯¼èˆªæ ï¼Œå¸¦æ»šåŠ¨æ•ˆæœå’Œç§»åŠ¨ç«¯èœå•

```tsx
"use client";

import Link from "next/link";
import { usePathname } from "next/navigation";
import { useState, useEffect } from "react";

export default function Nav() {
  const pathname = usePathname(); // å½“å‰è·¯ç”±
  const [isScrolled, setIsScrolled] = useState(false);
  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);

  // ===== æ»šåŠ¨æ£€æµ‹ =====
  useEffect(() => {
    const handleScroll = () => {
      setIsScrolled(window.scrollY > 20);
    };

    window.addEventListener("scroll", handleScroll);
    return () => window.removeEventListener("scroll", handleScroll);
  }, []);

  const navLinks = [
    { href: "/", label: "é¦–é¡µ" },
    { href: "/posts", label: "æ–‡ç« " },
    { href: "/knowledge", label: "çŸ¥è¯†åº“" },
    { href: "/program", label: "ä½œå“é›†" },
    { href: "/lab", label: "å®éªŒå®¤" },
  ];

  return (
    <nav
      className={`nav-cosmic fixed top-0 left-0 right-0 z-50 transition-all duration-300 
        ${isScrolled ? "scrolled" : ""}`}
    >
      {/* æ˜Ÿå…‰è¾¹æ¡† - æ»šåŠ¨æ—¶æ˜¾ç¤º */}
      <div className={`nav-starlight-border ${isScrolled ? "active" : ""}`} />
      
      <div className="container mx-auto px-4">
        <div className="flex items-center justify-between h-16 md:h-20">
          {/* Logo */}
          <Link href="/" className="flex items-center space-x-3 group relative">
            <div className="logo-glow relative">
              <div className="logo-pulse-ring" />
              <div 
                className="relative w-10 h-10 rounded-xl flex items-center justify-center"
                style={{
                  background: "linear-gradient(135deg, #7b2cbf 0%, #e94560 100%)",
                }}
              >
                <span className="text-white font-bold text-xl">N</span>
              </div>
            </div>
            <span className="hidden sm:block text-xl font-bold bg-gradient-to-r from-[#7b2cbf] via-[#e94560] to-[#00d9ff] bg-clip-text text-transparent">
              Nebula Lucent
            </span>
          </Link>

          {/* æ¡Œé¢ç«¯å¯¼èˆª */}
          <div className="hidden md:flex items-center space-x-1">
            {navLinks.map((link) => {
              const isActive = pathname === link.href;
              return (
                <Link
                  key={link.href}
                  href={link.href}
                  className={`nav-link-cosmic relative px-4 py-2 rounded-lg font-medium
                    ${isActive ? "active text-[#7b2cbf]" : "text-gray-700 hover:text-[#7b2cbf]"}`}
                >
                  <span className="relative z-10">{link.label}</span>
                  <span className="nav-link-starlight" />
                </Link>
              );
            })}
          </div>

          {/* ç§»åŠ¨ç«¯èœå•æŒ‰é’® */}
          <button
            className="md:hidden p-2 rounded-lg"
            onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}
          >
            {/* æ±‰å ¡èœå•åŠ¨ç”» */}
            <div className="w-6 h-6 flex flex-col justify-center space-y-1.5">
              <span className={`block h-0.5 w-6 rounded-full transition-all
                ${isMobileMenuOpen ? "rotate-45 translate-y-2 bg-[#e94560]" : "bg-gray-700"}`} />
              <span className={`block h-0.5 w-6 rounded-full transition-all
                ${isMobileMenuOpen ? "opacity-0" : "bg-gray-700"}`} />
              <span className={`block h-0.5 w-6 rounded-full transition-all
                ${isMobileMenuOpen ? "-rotate-45 -translate-y-2 bg-[#e94560]" : "bg-gray-700"}`} />
            </div>
          </button>
        </div>

        {/* ç§»åŠ¨ç«¯èœå• */}
        <div className={`md:hidden overflow-hidden transition-all duration-300
          ${isMobileMenuOpen ? "max-h-80 opacity-100 pb-4" : "max-h-0 opacity-0"}`}>
          {navLinks.map((link) => (
            <Link
              key={link.href}
              href={link.href}
              onClick={() => setIsMobileMenuOpen(false)}
              className="block px-4 py-3 rounded-lg font-medium"
            >
              {link.label}
            </Link>
          ))}
        </div>
      </div>
    </nav>
  );
}
```

---

## 8. é¡µé¢å¼€å‘è¯¦è§£

### 8.1 app/layout.tsx - æ ¹å¸ƒå±€

**ä½œç”¨ï¼š** å®šä¹‰å…¨å±€å¸ƒå±€ï¼ŒåŒ…å«å¯¼èˆªã€Footerã€å…¨å±€ Provider

```tsx
// app/layout.tsx
import "./globals.css";
import Nav from "@/components/Nav";
import ClientProviders from "@/components/ClientProviders";
import CosmicFooter from "@/components/cosmic/CosmicFooter";

// SEO å…ƒæ•°æ®
export const metadata = {
  title: "Nebula Lucent - æ¢ç´¢å®‡å®™çš„è¾¹ç•Œ",
  description: "ä¸€ä¸ªç°ä»£åŒ–çš„ä¸ªäººç©ºé—´ï¼Œè®°å½•æŠ€æœ¯æ¢ç´¢ä¸åˆ›ä½œå†ç¨‹",
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="zh-CN" className="scroll-smooth">
      <body className="antialiased">
        {/* å®¢æˆ·ç«¯ Providerï¼ˆé¼ æ ‡è·Ÿéšæ˜Ÿçƒï¼‰ */}
        <ClientProviders />
        
        {/* å¯¼èˆªæ  */}
        <Nav />
        
        {/* ä¸»å†…å®¹åŒºåŸŸï¼Œç•™å‡ºå¯¼èˆªæ é«˜åº¦ */}
        <div className="pt-16 md:pt-20">
          {children}
        </div>
        
        {/* é¡µè„š */}
        <CosmicFooter />
      </body>
    </html>
  );
}
```

**å¸ƒå±€å±‚çº§ï¼š**

```
<html>
  <body>
    <ClientProviders />     â† é¼ æ ‡è·Ÿéšæ˜Ÿçƒ (z-50)
    <Nav />                 â† å¯¼èˆªæ  (z-50, fixed)
    <div className="pt-16"> â† å†…å®¹åŒºåŸŸ
      {children}            â† é¡µé¢å†…å®¹
    </div>
    <CosmicFooter />        â† é¡µè„š
  </body>
</html>
```

### 8.2 app/page.tsx - é¦–é¡µ

**ä½œç”¨ï¼š** ç½‘ç«™é¦–é¡µï¼Œå±•ç¤ºæ¨¡å—å…¥å£å¡ç‰‡

```tsx
"use client";

import Link from "next/link";
import { useEffect, useState } from "react";
import { CosmicBackground, CosmicCard } from "@/components/cosmic";

// æ¨¡å—å¡ç‰‡æ•°æ®
interface ModuleCard {
  title: string;
  description: string;
  href: string;
  icon: React.ReactNode;
  gradient: string;
  accentColor: string;
  delay: number;
}

export default function Home() {
  const [mounted, setMounted] = useState(false);

  // å…¥åœºåŠ¨ç”»
  useEffect(() => {
    const frame = requestAnimationFrame(() => setMounted(true));
    return () => cancelAnimationFrame(frame);
  }, []);

  const modules: ModuleCard[] = [
    {
      title: "åšå®¢",
      description: "è®°å½•æŠ€æœ¯æ€è€ƒã€ç”Ÿæ´»æ„Ÿæ‚Ÿä¸å­¦ä¹ å¿ƒå¾—",
      href: "/posts",
      icon: <svg>...</svg>,
      gradient: "from-[#00d9ff] to-[#7b2cbf]",
      accentColor: "#00d9ff",
      delay: 0,
    },
    // ... å…¶ä»–æ¨¡å—
  ];

  return (
    <main className="min-h-screen overflow-hidden relative">
      {/* å®‡å®™èƒŒæ™¯ */}
      <CosmicBackground variant="hero" starCount={80} showAurora showOrbs />

      {/* å†…å®¹å±‚ */}
      <div className="content-layer">
        {/* Hero åŒºåŸŸ */}
        <section className="relative pt-24 pb-16 md:pt-36 md:pb-24">
          <div className="container mx-auto px-4">
            <div className={`text-center transition-all duration-1000 
              ${mounted ? "opacity-100 translate-y-0" : "opacity-0 translate-y-8"}`}>
              
              {/* ä¸»æ ‡é¢˜ - æ¸å˜åŠ¨ç”» */}
              <h1 className="text-6xl md:text-8xl font-bold mb-6 glow-text">
                Nebula Lucent
              </h1>
              
              {/* å‰¯æ ‡é¢˜ */}
              <p className="text-xl md:text-2xl text-gray-600 dark:text-gray-300">
                æ¢ç´¢ Â· åˆ›é€  Â· åˆ†äº«
              </p>
            </div>
          </div>
        </section>

        {/* æ¨¡å—å¡ç‰‡ç½‘æ ¼ */}
        <section className="container mx-auto px-4 pb-20">
          <div className="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8 max-w-5xl mx-auto">
            {modules.map((module) => (
              <Link key={module.href} href={module.href} className="group">
                <CosmicCard delay={module.delay} className="h-full">
                  {/* å›¾æ ‡ */}
                  <div className={`inline-flex items-center justify-center w-16 h-16 rounded-xl 
                    bg-gradient-to-br ${module.gradient} text-white`}>
                    {module.icon}
                  </div>
                  
                  {/* æ ‡é¢˜å’Œæè¿° */}
                  <h2 className="text-2xl font-bold mb-2">{module.title}</h2>
                  <p className="text-gray-600">{module.description}</p>
                </CosmicCard>
              </Link>
            ))}
          </div>
        </section>
      </div>
    </main>
  );
}
```

---

## 9. æ•°æ®å±‚è¯¦è§£

### 9.1 src/lib/posts.ts - æ–‡ç« æ•°æ®å¤„ç†

**ä½œç”¨ï¼š** è¯»å– MDX æ–‡ä»¶ï¼Œè§£æ frontmatterï¼Œæä¾›æ–‡ç« æ•°æ®


```typescript
// src/lib/posts.ts
import fs from "fs";
import path from "path";
import matter from "gray-matter";

// æ–‡ç« ç›®å½•
const postsDirectory = path.join(process.cwd(), "content", "posts");

// æ–‡ç« å…ƒæ•°æ®æ¥å£
export interface PostMeta {
  title: string;
  date: string;
  excerpt?: string;
  tags?: string[];
  author?: string;
  slug: string;
}

// å®Œæ•´æ–‡ç« æ¥å£
export interface Post extends PostMeta {
  content: string;
}

// ===== è·å–æ‰€æœ‰æ–‡ç«  =====
export function getAllPosts(): PostMeta[] {
  // æ£€æŸ¥ç›®å½•æ˜¯å¦å­˜åœ¨
  if (!fs.existsSync(postsDirectory)) {
    return [];
  }

  const fileNames = fs.readdirSync(postsDirectory);
  
  const allPostsData = fileNames
    // åªå¤„ç† .mdx å’Œ .md æ–‡ä»¶
    .filter((name) => name.endsWith(".mdx") || name.endsWith(".md"))
    .map((fileName) => {
      // ä»æ–‡ä»¶åç”Ÿæˆ slug
      const slug = fileName.replace(/\.(mdx|md)$/, "");
      
      // è¯»å–æ–‡ä»¶å†…å®¹
      const fullPath = path.join(postsDirectory, fileName);
      const fileContents = fs.readFileSync(fullPath, "utf8");
      
      // ä½¿ç”¨ gray-matter è§£æ frontmatter
      const { data } = matter(fileContents);

      return {
        slug,
        title: data.title || "æœªå‘½åæ–‡ç« ",
        date: data.date || new Date().toISOString(),
        excerpt: data.excerpt || "",
        tags: data.tags || [],
        author: data.author || "",
      };
    });

  // æŒ‰æ—¥æœŸé™åºæ’åº
  return allPostsData.sort((a, b) => {
    return new Date(b.date).getTime() - new Date(a.date).getTime();
  });
}

// ===== æ ¹æ® slug è·å–æ–‡ç«  =====
export function getPostBySlug(slug: string): Post | null {
  try {
    // å°è¯• .mdx æ‰©å±•å
    let fullPath = path.join(postsDirectory, `${slug}.mdx`);
    
    if (!fs.existsSync(fullPath)) {
      // å°è¯• .md æ‰©å±•å
      fullPath = path.join(postsDirectory, `${slug}.md`);
      if (!fs.existsSync(fullPath)) {
        return null;
      }
    }

    const fileContents = fs.readFileSync(fullPath, "utf8");
    const { data, content } = matter(fileContents);

    return {
      slug,
      title: data.title || "æœªå‘½åæ–‡ç« ",
      date: data.date || new Date().toISOString(),
      excerpt: data.excerpt || "",
      tags: data.tags || [],
      author: data.author || "",
      content, // Markdown å†…å®¹
    };
  } catch (error) {
    console.error(`Error reading post ${slug}:`, error);
    return null;
  }
}

// ===== è·å–æ‰€æœ‰ slugï¼ˆç”¨äºé™æ€ç”Ÿæˆï¼‰=====
export function getAllPostSlugs(): string[] {
  if (!fs.existsSync(postsDirectory)) {
    return [];
  }

  const fileNames = fs.readdirSync(postsDirectory);
  return fileNames
    .filter((name) => name.endsWith(".mdx") || name.endsWith(".md"))
    .map((fileName) => fileName.replace(/\.(mdx|md)$/, ""));
}
```

**æ•°æ®æµç¨‹ï¼š**

```
content/posts/
â”œâ”€â”€ welcome.mdx
â”œâ”€â”€ getting-started.mdx
â””â”€â”€ example-code.mdx
        â†“
    fs.readFileSync()
        â†“
    gray-matter() è§£æ
        â†“
    { data: frontmatter, content: markdown }
        â†“
    è¿”å› Post å¯¹è±¡
```

### 9.2 src/lib/projects.ts - ä½œå“æ•°æ®

**ä½œç”¨ï¼š** å®šä¹‰ä½œå“æ•°æ®ç»“æ„å’Œæ•°æ®

```typescript
// src/lib/projects.ts

// ä½œå“æ•°æ®ç»“æ„
export interface Project {
  id: string;           // å”¯ä¸€æ ‡è¯†ï¼Œç”¨äº URL
  title: string;        // æ ‡é¢˜
  description: string;  // ç®€çŸ­æè¿°
  longDescription?: string; // è¯¦ç»†æè¿°
  image?: string;       // ä¸»å›¾
  images?: string[];    // ç»†èŠ‚å›¾
  icon?: string;        // emoji å›¾æ ‡
  tags: string[];       // æ ‡ç­¾
  technologies: string[]; // æŠ€æœ¯æ ˆ
  category: "web" | "mobile" | "desktop" | "game" | "library" | "ai" | "other";
  status: "completed" | "in-progress" | "archived";
  date: string;         // ISO æ—¥æœŸ
  links?: {
    demo?: string;
    github?: string;
    website?: string;
    download?: string;
  };
  featured?: boolean;   // æ˜¯å¦ç²¾é€‰
}

// ä½œå“æ•°æ®
export const projects: Project[] = [
  {
    id: "nebulalucent-blog",
    title: "Nebula Lucent Blog",
    description: "ç°ä»£åŒ–ä¸ªäººåšå®¢ç³»ç»Ÿ",
    technologies: ["Next.js", "TypeScript", "Tailwind CSS", "MDX"],
    category: "web",
    status: "completed",
    date: "2025-01-01",
    featured: true,
    icon: "ğŸŒŒ",
  },
  // ... æ›´å¤šä½œå“
];

// ===== è·å–æ‰€æœ‰ä½œå“ï¼ˆç²¾é€‰ä¼˜å…ˆï¼ŒæŒ‰æ—¥æœŸæ’åºï¼‰=====
export function getAllProjects(): Project[] {
  return projects.sort((a, b) => {
    // ç²¾é€‰ä¼˜å…ˆ
    if (a.featured && !b.featured) return -1;
    if (!a.featured && b.featured) return 1;
    // ç„¶åæŒ‰æ—¥æœŸ
    return new Date(b.date).getTime() - new Date(a.date).getTime();
  });
}

// ===== æ ¹æ® ID è·å–ä½œå“ =====
export function getProjectById(id: string): Project | undefined {
  return projects.find((project) => project.id === id);
}

// ===== æ ¹æ®åˆ†ç±»è·å–ä½œå“ =====
export function getProjectsByCategory(category: Project["category"]): Project[] {
  return projects.filter((project) => project.category === category);
}

// ===== è·å–æ‰€æœ‰æ ‡ç­¾ =====
export function getAllTags(): string[] {
  const tagSet = new Set<string>();
  projects.forEach((project) => {
    project.tags.forEach((tag) => tagSet.add(tag));
    project.technologies.forEach((tech) => tagSet.add(tech));
  });
  return Array.from(tagSet).sort();
}
```

---

## 10. 3D æ•ˆæœå®ç°

### 10.1 Scene3D.tsx - Three.js åœºæ™¯å®¹å™¨

**æ–‡ä»¶ä½ç½®ï¼š** `components/home/Scene3D.tsx`

**ä½œç”¨ï¼š** åˆ›å»º Three.js æ¸²æŸ“å®¹å™¨ï¼Œå¤„ç† WebGL å…¼å®¹æ€§

```tsx
"use client";

import { Canvas } from "@react-three/fiber";
import { Suspense, useEffect, useState } from "react";

// ===== WebGL æ”¯æŒæ£€æµ‹ =====
export const useWebGLSupport = () => {
  const [supported, setSupported] = useState(true);

  useEffect(() => {
    try {
      const canvas = document.createElement("canvas");
      const gl = canvas.getContext("webgl") || canvas.getContext("experimental-webgl");
      setSupported(!!gl);
    } catch {
      setSupported(false);
    }
  }, []);

  return supported;
};

// ===== CSS é™çº§èƒŒæ™¯ =====
const FallbackBackground = () => (
  <div className="absolute inset-0 overflow-hidden">
    <div className="absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl animate-pulse" />
    <div className="absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl animate-pulse" />
  </div>
);

// ===== 3D åœºæ™¯ç»„ä»¶ =====
const Scene3D: React.FC<{ children?: React.ReactNode }> = ({ children }) => {
  const webGLSupported = useWebGLSupport();
  const [mounted, setMounted] = useState(false);

  useEffect(() => {
    setMounted(true);
  }, []);

  // æœªæŒ‚è½½æˆ–ä¸æ”¯æŒ WebGL æ—¶æ˜¾ç¤ºé™çº§èƒŒæ™¯
  if (!mounted || !webGLSupported) {
    return <FallbackBackground />;
  }

  return (
    <div className="absolute inset-0">
      <Canvas
        camera={{ position: [0, 0, 5], fov: 75 }}
        dpr={[1, 2]}  // è®¾å¤‡åƒç´ æ¯”
        gl={{ antialias: true, alpha: true }}
      >
        <Suspense fallback={null}>
          {children}
        </Suspense>
      </Canvas>
    </div>
  );
};

export default Scene3D;
```

**Canvas é…ç½®è¯´æ˜ï¼š**

| å±æ€§ | å€¼ | è¯´æ˜ |
|------|-----|------|
| `camera.position` | `[0, 0, 5]` | ç›¸æœºä½ç½® (x, y, z) |
| `camera.fov` | `75` | è§†é‡è§’åº¦ |
| `dpr` | `[1, 2]` | è®¾å¤‡åƒç´ æ¯”èŒƒå›´ |
| `gl.antialias` | `true` | æŠ—é”¯é½¿ |
| `gl.alpha` | `true` | é€æ˜èƒŒæ™¯ |

### 10.2 ParticleField.tsx - 3D ç²’å­é“¶æ²³ç³»

**æ–‡ä»¶ä½ç½®ï¼š** `components/home/ParticleField.tsx`

**ä½œç”¨ï¼š** åˆ›å»º 3D é“¶æ²³ç³»ç²’å­æ•ˆæœ


```tsx
"use client";

import { useRef, useMemo } from "react";
import { useFrame } from "@react-three/fiber";
import * as THREE from "three";

interface ParticleFieldProps {
  count?: number;   // ç²’å­æ•°é‡
  size?: number;    // ç²’å­å¤§å°
  speed?: number;   // æ—‹è½¬é€Ÿåº¦
}

const ParticleField: React.FC<ParticleFieldProps> = ({
  count = 12000,
  size = 0.06,
  speed = 0.025,
}) => {
  // å„å±‚ç²’å­çš„å¼•ç”¨
  const galaxyRef = useRef<THREE.Points>(null);
  const coreRef = useRef<THREE.Points>(null);
  const brightStarsRef = useRef<THREE.Points>(null);
  const nebulaRef = useRef<THREE.Points>(null);
  
  // é¼ æ ‡ä½ç½®
  const mouseRef = useRef({ x: 0, y: 0 });

  // ===== é“¶æ²³ç³»ä¸»ä½“ - æ—‹è‡‚ç»“æ„ =====
  const galaxy = useMemo(() => {
    const positions = new Float32Array(count * 3);
    const colors = new Float32Array(count * 3);
    const sizes = new Float32Array(count);

    const arms = 4;           // æ—‹è‡‚æ•°é‡
    const armSpread = 0.4;    // æ—‹è‡‚æ‰©æ•£åº¦
    const galaxyRadius = 22;  // é“¶æ²³ç³»åŠå¾„

    // é¢œè‰²è°ƒè‰²æ¿
    const colorPalette = [
      new THREE.Color("#fef3c7"), // æš–é»„
      new THREE.Color("#c4b5fd"), // æ·¡ç´«
      new THREE.Color("#60a5fa"), // è“è‰²
      new THREE.Color("#f472b6"), // ç²‰è‰²
    ];

    for (let i = 0; i < count; i++) {
      // åŠå¾„ï¼šä½¿ç”¨å¹³æ–¹æ ¹åˆ†å¸ƒï¼Œä¸­å¿ƒæ›´å¯†é›†
      const radius = Math.pow(Math.random(), 0.5) * galaxyRadius;
      
      // æ—‹è‡‚è§’åº¦
      const armAngle = ((i % arms) / arms) * Math.PI * 2;
      const spinAngle = radius * 0.75; // æ—‹è½¬è§’åº¦éšåŠå¾„å¢åŠ 
      const randomOffset = (Math.random() - 0.5) * armSpread * radius;
      const angle = armAngle + spinAngle + randomOffset;

      // è®¡ç®—ä½ç½®
      const x = Math.cos(angle) * radius;
      const z = Math.sin(angle) * radius;
      const y = (Math.random() - 0.5) * (0.4 - radius * 0.015); // æ‰å¹³åŒ–

      positions[i * 3] = x;
      positions[i * 3 + 1] = y;
      positions[i * 3 + 2] = z - 5; // å‘ååç§»

      // æ ¹æ®ä½ç½®é€‰æ‹©é¢œè‰²
      const t = radius / galaxyRadius;
      const colorIndex = Math.floor(t * colorPalette.length);
      const color = colorPalette[Math.min(colorIndex, colorPalette.length - 1)];
      
      colors[i * 3] = color.r;
      colors[i * 3 + 1] = color.g;
      colors[i * 3 + 2] = color.b;

      // éšæœºå¤§å°
      sizes[i] = Math.random() < 0.05 ? size * 2.5 : size * (0.4 + Math.random() * 0.6);
    }

    const geo = new THREE.BufferGeometry();
    geo.setAttribute("position", new THREE.BufferAttribute(positions, 3));
    geo.setAttribute("color", new THREE.BufferAttribute(colors, 3));
    geo.setAttribute("size", new THREE.BufferAttribute(sizes, 1));
    return geo;
  }, [count, size]);

  // ===== é“¶æ²³æ ¸å¿ƒ - æ˜äº®ä¸­å¿ƒ =====
  const core = useMemo(() => {
    const coreCount = 3500;
    const positions = new Float32Array(coreCount * 3);
    const colors = new Float32Array(coreCount * 3);

    const coreColors = [
      new THREE.Color("#fffbeb"),
      new THREE.Color("#fde68a"),
      new THREE.Color("#fbbf24"),
    ];

    for (let i = 0; i < coreCount; i++) {
      // çƒå½¢åˆ†å¸ƒ
      const radius = Math.pow(Math.random(), 2) * 3.5;
      const theta = Math.random() * Math.PI * 2;
      const phi = Math.acos(2 * Math.random() - 1);

      positions[i * 3] = radius * Math.sin(phi) * Math.cos(theta);
      positions[i * 3 + 1] = radius * Math.sin(phi) * Math.sin(theta) * 0.35; // æ‰å¹³åŒ–
      positions[i * 3 + 2] = radius * Math.cos(phi) - 5;

      const color = coreColors[Math.floor(Math.random() * coreColors.length)];
      colors[i * 3] = color.r;
      colors[i * 3 + 1] = color.g;
      colors[i * 3 + 2] = color.b;
    }

    const geo = new THREE.BufferGeometry();
    geo.setAttribute("position", new THREE.BufferAttribute(positions, 3));
    geo.setAttribute("color", new THREE.BufferAttribute(colors, 3));
    return geo;
  }, []);

  // ===== é¼ æ ‡ç›‘å¬ =====
  useMemo(() => {
    const handleMouseMove = (event: MouseEvent) => {
      mouseRef.current.x = (event.clientX / window.innerWidth) * 2 - 1;
      mouseRef.current.y = -(event.clientY / window.innerHeight) * 2 + 1;
    };

    if (typeof window !== "undefined") {
      window.addEventListener("mousemove", handleMouseMove);
      return () => window.removeEventListener("mousemove", handleMouseMove);
    }
  }, []);

  // ===== åŠ¨ç”»å¾ªç¯ =====
  useFrame((state) => {
    const time = state.clock.getElapsedTime();
    
    // é¼ æ ‡å½±å“æ—‹è½¬è§’åº¦
    const rotX = 0.7 + mouseRef.current.y * 0.1;
    const rotZ = mouseRef.current.x * 0.05;

    // é“¶æ²³ç³»æ—‹è½¬
    if (galaxyRef.current) {
      galaxyRef.current.rotation.y = time * speed;
      galaxyRef.current.rotation.x = rotX;
      galaxyRef.current.rotation.z = rotZ;
    }

    // æ ¸å¿ƒæ—‹è½¬
    if (coreRef.current) {
      coreRef.current.rotation.y = time * speed;
      coreRef.current.rotation.x = rotX;
    }
  });

  return (
    <group>
      {/* é“¶æ²³ç³»æ—‹è‡‚ */}
      <points ref={galaxyRef} geometry={galaxy}>
        <pointsMaterial
          size={size}
          vertexColors
          transparent
          opacity={0.95}
          sizeAttenuation
          blending={THREE.AdditiveBlending}
          depthWrite={false}
        />
      </points>

      {/* é“¶æ²³æ ¸å¿ƒ */}
      <points ref={coreRef} geometry={core}>
        <pointsMaterial
          size={size * 1.8}
          vertexColors
          transparent
          opacity={1}
          sizeAttenuation
          blending={THREE.AdditiveBlending}
          depthWrite={false}
        />
      </points>
    </group>
  );
};

export default ParticleField;
```

**Three.js æ ¸å¿ƒæ¦‚å¿µï¼š**

| æ¦‚å¿µ | è¯´æ˜ |
|------|------|
| `BufferGeometry` | é«˜æ€§èƒ½å‡ ä½•ä½“ï¼Œä½¿ç”¨ TypedArray |
| `BufferAttribute` | é¡¶ç‚¹å±æ€§ï¼ˆä½ç½®ã€é¢œè‰²ã€å¤§å°ï¼‰ |
| `Points` | ç‚¹äº‘æ¸²æŸ“ |
| `pointsMaterial` | ç‚¹æè´¨ |
| `AdditiveBlending` | åŠ æ³•æ··åˆï¼Œè®©äº®ç‚¹æ›´äº® |
| `useFrame` | æ¯å¸§è°ƒç”¨çš„ Hook |

**æ—‹è‡‚ç®—æ³•è§£é‡Šï¼š**

```
1. å°†ç²’å­åˆ†é…åˆ° 4 æ¡æ—‹è‡‚
2. æ¯æ¡æ—‹è‡‚æœ‰åŸºç¡€è§’åº¦ (0Â°, 90Â°, 180Â°, 270Â°)
3. è§’åº¦éšåŠå¾„å¢åŠ è€Œæ—‹è½¬ (spinAngle)
4. æ·»åŠ éšæœºåç§» (randomOffset) è®©æ—‹è‡‚æ›´è‡ªç„¶
5. ä½¿ç”¨å¹³æ–¹æ ¹åˆ†å¸ƒè®©ä¸­å¿ƒæ›´å¯†é›†
```

### 10.3 FloatingGeometry.tsx - æ¼‚æµ®å‡ ä½•ä½“

**ä½œç”¨ï¼š** åˆ›å»ºæ¼‚æµ®çš„ 3D å‡ ä½•ä½“è£…é¥°

```tsx
"use client";

import { useRef } from "react";
import { useFrame } from "@react-three/fiber";
import { MeshDistortMaterial } from "@react-three/drei";
import * as THREE from "three";

type GeometryType = "sphere" | "torus" | "octahedron" | "icosahedron";

interface FloatingGeometryProps {
  position: [number, number, number];
  geometry?: GeometryType;
  color?: string;
  scale?: number;
  rotationSpeed?: number;
  floatSpeed?: number;
  floatAmplitude?: number;
  distort?: number;
}

const FloatingGeometry: React.FC<FloatingGeometryProps> = ({
  position,
  geometry = "sphere",
  color = "#8b5cf6",
  scale = 1,
  rotationSpeed = 0.5,
  floatSpeed = 1,
  floatAmplitude = 0.3,
  distort = 0.3,
}) => {
  const meshRef = useRef<THREE.Mesh>(null);
  const initialY = position[1];

  // åŠ¨ç”»å¾ªç¯
  useFrame((state) => {
    if (!meshRef.current) return;

    const time = state.clock.getElapsedTime();

    // æ—‹è½¬åŠ¨ç”»
    meshRef.current.rotation.x = time * rotationSpeed * 0.5;
    meshRef.current.rotation.y = time * rotationSpeed;

    // æ¼‚æµ®åŠ¨ç”»ï¼ˆæ­£å¼¦æ³¢ï¼‰
    meshRef.current.position.y = initialY + Math.sin(time * floatSpeed) * floatAmplitude;
  });

  // æ ¹æ®ç±»å‹æ¸²æŸ“å‡ ä½•ä½“
  const renderGeometry = () => {
    switch (geometry) {
      case "torus":
        return <torusGeometry args={[0.5, 0.2, 16, 32]} />;
      case "octahedron":
        return <octahedronGeometry args={[0.6, 0]} />;
      case "icosahedron":
        return <icosahedronGeometry args={[0.5, 0]} />;
      default:
        return <sphereGeometry args={[0.5, 32, 32]} />;
    }
  };

  return (
    <mesh ref={meshRef} position={position} scale={scale}>
      {renderGeometry()}
      {/* MeshDistortMaterialï¼šå˜å½¢æè´¨ï¼Œè®©å‡ ä½•ä½“æœ‰å¼¹æ€§æ„Ÿ */}
      <MeshDistortMaterial
        color={color}
        transparent
        opacity={0.6}
        distort={distort}  // å˜å½¢ç¨‹åº¦
        speed={2}          // å˜å½¢é€Ÿåº¦
        roughness={0.2}
        metalness={0.8}
      />
    </mesh>
  );
};

export default FloatingGeometry;
```

---

## 11. æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 11.1 åŠ¨æ€å¯¼å…¥é¿å… SSR é—®é¢˜

```tsx
// ä½¿ç”¨ next/dynamic åŠ¨æ€å¯¼å…¥
import dynamic from "next/dynamic";

const PlanetCursor = dynamic(
  () => import("@/components/cosmic/PlanetCursor"),
  { ssr: false }  // ç¦ç”¨æœåŠ¡ç«¯æ¸²æŸ“
);
```

**é€‚ç”¨åœºæ™¯ï¼š**
- ä½¿ç”¨ `window`ã€`document` çš„ç»„ä»¶
- Three.js ç»„ä»¶
- ä¾èµ–æµè§ˆå™¨ API çš„ç»„ä»¶

### 11.2 useMemo ç¼“å­˜è®¡ç®—

```tsx
// æ˜Ÿç‚¹æ•°æ®åªåœ¨ starCount å˜åŒ–æ—¶é‡æ–°è®¡ç®—
const stars = useMemo(() => {
  return Array.from({ length: starCount }, (_, i) => ({
    id: i,
    x: Math.random() * 100,
    y: Math.random() * 100,
    // ...
  }));
}, [starCount]);
```

### 11.3 useRef é¿å…é‡æ¸²æŸ“

```tsx
// ä½¿ç”¨ ref å­˜å‚¨é¢‘ç¹å˜åŒ–çš„å€¼
const mousePos = useRef({ x: 0, y: 0 });

// æ›´æ–°æ—¶ä¸è§¦å‘é‡æ¸²æŸ“
const handleMouseMove = (e: MouseEvent) => {
  mousePos.current = { x: e.clientX, y: e.clientY };
};
```

### 11.4 requestAnimationFrame ä¼˜åŒ–åŠ¨ç”»

```tsx
useEffect(() => {
  let animationId: number;
  
  const animate = () => {
    // åŠ¨ç”»é€»è¾‘
    animationId = requestAnimationFrame(animate);
  };
  
  animate();
  
  // æ¸…ç†
  return () => cancelAnimationFrame(animationId);
}, []);
```

### 11.5 CSS ç¡¬ä»¶åŠ é€Ÿ

```css
.animated-element {
  /* è§¦å‘ GPU åŠ é€Ÿ */
  transform: translateZ(0);
  will-change: transform, opacity;
}
```

### 11.6 ç§»åŠ¨ç«¯ç¦ç”¨å¤æ‚æ•ˆæœ

```tsx
const useIsMobile = () => {
  const [isMobile, setIsMobile] = useState(false);
  
  useEffect(() => {
    const checkMobile = () => {
      setIsMobile(
        window.innerWidth < 768 || 
        'ontouchstart' in window
      );
    };
    
    checkMobile();
    window.addEventListener('resize', checkMobile);
    return () => window.removeEventListener('resize', checkMobile);
  }, []);
  
  return isMobile;
};

// ä½¿ç”¨
if (isMobile) return null; // ç§»åŠ¨ç«¯ä¸æ¸²æŸ“
```

---

## 12. å¼€å‘æµç¨‹æŒ‡å—

### 12.1 é¡¹ç›®åˆå§‹åŒ–

```bash
# 1. åˆ›å»º Next.js é¡¹ç›®
npx create-next-app@latest nebula-lucent

# é€‰æ‹©ï¼š
# âœ… TypeScript
# âœ… ESLint
# âœ… Tailwind CSS
# âœ… App Router

# 2. å®‰è£…é¢å¤–ä¾èµ–
npm install three @react-three/fiber @react-three/drei
npm install @mdx-js/loader @mdx-js/react @next/mdx
npm install gray-matter react-markdown remark-gfm rehype-highlight
npm install date-fns slugify

# 3. å®‰è£…ç±»å‹å®šä¹‰
npm install -D @types/three
```

### 12.2 å¼€å‘å‘½ä»¤

```bash
# å¼€å‘æ¨¡å¼
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm run start

# ä»£ç æ£€æŸ¥
npm run lint

# åˆ›å»ºæ–°æ–‡ç« 
npm run create-post "æ–‡ç« æ ‡é¢˜"
```

### 12.3 æ·»åŠ æ–°é¡µé¢

```
1. åœ¨ app/ ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹
2. åˆ›å»º page.tsx æ–‡ä»¶
3. å¯¼å‡ºé»˜è®¤ç»„ä»¶
```

```tsx
// app/new-page/page.tsx
export default function NewPage() {
  return (
    <main>
      <h1>æ–°é¡µé¢</h1>
    </main>
  );
}
```

### 12.4 æ·»åŠ æ–°ç»„ä»¶

```
1. åœ¨ components/ ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶
2. ä½¿ç”¨ "use client" æ ‡è®°å®¢æˆ·ç«¯ç»„ä»¶
3. åœ¨ index.ts ä¸­å¯¼å‡º
```

```tsx
// components/cosmic/NewComponent.tsx
"use client";

export default function NewComponent() {
  return <div>æ–°ç»„ä»¶</div>;
}

// components/cosmic/index.ts
export { default as NewComponent } from './NewComponent';
```

### 12.5 æ·»åŠ æ–°æ–‡ç« 

```bash
# æ–¹å¼1ï¼šä½¿ç”¨è„šæœ¬
npm run create-post "æˆ‘çš„æ–°æ–‡ç« "

# æ–¹å¼2ï¼šæ‰‹åŠ¨åˆ›å»º
# åœ¨ content/posts/ ä¸‹åˆ›å»º .mdx æ–‡ä»¶
```

```mdx
---
title: "æˆ‘çš„æ–°æ–‡ç« "
date: "2025-01-01"
excerpt: "æ–‡ç« æ‘˜è¦"
tags: ["React", "Next.js"]
author: "ä½œè€…å"
---

# æ–‡ç« æ ‡é¢˜

æ–‡ç« å†…å®¹...
```

### 12.6 æ·»åŠ æ–°ä½œå“

ç¼–è¾‘ `src/lib/projects.ts`ï¼š

```typescript
export const projects: Project[] = [
  // æ·»åŠ æ–°ä½œå“
  {
    id: "new-project",
    title: "æ–°é¡¹ç›®",
    description: "é¡¹ç›®æè¿°",
    technologies: ["React", "TypeScript"],
    category: "web",
    status: "completed",
    date: "2025-01-01",
    icon: "ğŸš€",
  },
  // ...
];
```

---

## æ€»ç»“

é€šè¿‡æœ¬æ•™ç¨‹ï¼Œä½ å­¦ä¼šäº†ï¼š

1. âœ… **æŠ€æœ¯æ ˆé€‰å‹**ï¼šNext.js + React + TypeScript + Tailwind CSS + Three.js
2. âœ… **é¡¹ç›®ç»“æ„**ï¼šApp Router è·¯ç”±ã€ç»„ä»¶ç»„ç»‡ã€æ•°æ®å±‚è®¾è®¡
3. âœ… **å®‡å®™ä¸»é¢˜**ï¼šCSS å˜é‡ç³»ç»Ÿã€æ¸å˜ã€åŠ¨ç”»
4. âœ… **æ ¸å¿ƒç»„ä»¶**ï¼šèƒŒæ™¯ã€å¡ç‰‡ã€å¯¼èˆªã€é¼ æ ‡è·Ÿéš
5. âœ… **3D æ•ˆæœ**ï¼šThree.js ç²’å­ç³»ç»Ÿã€é“¶æ²³ç³»
6. âœ… **æ€§èƒ½ä¼˜åŒ–**ï¼šåŠ¨æ€å¯¼å…¥ã€useMemoã€useRefã€requestAnimationFrame
7. âœ… **å¼€å‘æµç¨‹**ï¼šåˆå§‹åŒ–ã€æ·»åŠ é¡µé¢ã€ç»„ä»¶ã€æ–‡ç« 

ç°åœ¨ä½ å¯ä»¥å¼€å§‹æ„å»ºè‡ªå·±çš„å®‡å®™ä¸»é¢˜ç½‘ç«™äº†ï¼ğŸš€

---

*Made with â™¥ and âœ¨ in the cosmos*
*æ•™ç¨‹ä½œè€…ï¼šKiro AI Assistant*
*æœ€åæ›´æ–°ï¼š2026-01-02*
